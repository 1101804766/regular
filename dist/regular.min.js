!function(){"use strict";function t(e,r,n){function i(){n=n||e,r=r||"root";var t=new Error('Failed to require "'+n+'" from "'+r+'"');throw t.path=n,t.parent=r,t.require=!0,t}var s=t.resolve(e);if(null==s)return void i();var a=t.modules[s];if(!a._resolving&&!a.exports){var o={};o.exports={},o.client=o.component=!0,a._resolving=!0,a.call(this,o.exports,t.relative(s),o),delete a._resolving,a.exports=o.exports}return a.exports}t.modules={},t.aliases={},t.exts=["",".js",".json","/index.js","/index.json"],t.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var r=0;5>r;r++){var n=e+t.exts[r];if(t.modules.hasOwnProperty(n))return n;if(t.aliases.hasOwnProperty(n))return t.aliases[n]}},t.normalize=function(t,e){var r=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var n=0;n<e.length;++n)".."===e[n]?t.pop():"."!=e[n]&&""!=e[n]&&r.push(e[n]);return t.concat(r).join("/")},t.register=function(e,r){t.modules[e]=r},t.alias=function(e,r){function n(){throw new Error('Failed to alias "'+e+'", it does not exist')}return t.modules.hasOwnProperty(e)?void(t.aliases[r]=e):void n()},t.relative=function(e){function r(n){var i=r.resolve(n);return t(i,e,n)}var n=t.normalize(e,"..");return r.resolve=function(r){var i=r.charAt(0);if("/"===i)return r.slice(1);if("."===i)return t.normalize(n,r);for(var s=e.split("/"),a=s.length;a--&&"deps"!==s[a];);return r=s.slice(0,a+2).join("/")+"/deps/"+r},r.exists=function(e){return t.modules.hasOwnProperty(r.resolve(e))},r},t.register("regularjs/src/Regular.js",function(t,e,r){function n(t,e){var r=e.name,n=e.value||"",i=p.directive(r);"ref"===r&&n&&(this.$refs[n]=t);var s=[];return i?i.call(this,t,n):"expression"==n.type?s.push(this.$watch(n,function(e){o.attr(t,r,e)})):o.attr(t,r,n),s}var i=e("./parser/Lexer.js"),s=e("./parser/Parser.js"),a=e("./parser/node.js"),o=e("./dom.js"),u=e("./group.js"),c=e("./util"),h=e("./helper/event.js"),l=e("./helper/combine.js"),f=/^\w{1,20}$/,p=function(t,e){var r,n;if("string"==typeof t&&(r=t,f.test(r)&&(n=o.id(r))&&(r=n.innerHTML),"string"==typeof r&&(this.template=new s(r).parse()),t=e,e=arguments[2]),e=e||{},"undefined"==typeof this.template)throw"template is required";this.data=t||{},this.$watchers=[],this.$children=[],this.$refs={},this.context=this.context||this,this.group=this.$compile(this.template),this.element=l.node(this),this.$parent=e.$parent,e.$parent||this.$digest(!0),this.init&&this.init.apply(this,arguments)};c.extend(p,{_directors:{},_components:{},_filters:{},_customers:{},_exprCache:{},__after__:function(t,e){var r;if(this.__after__=t.__after__,this._directors=c.createObject(t._directors),e.name&&p.component(e.name,this),r=e.template){var n,i;f.test(r)&&(n=o.id(r))&&(r=n.innerHTML,(i=o.attr(n,"name"))&&p.component(i,this)),"string"==typeof r&&(this.prototype.template=new s(r).parse())}},derive:c.derive,directive:function(t,e){var r=this._directors;return null==e?r[t]:(r[t]=e,this)},filter:function(t,e){var r=this._filters;return null==e?r[t]:(r[t]=e,this)},component:function(t,e){return e?(this._components[t]=e,this):this._components[t]},parse:function(t){if("expression"===t.type)return t;var t=t.trim(),e=this._exprCache[t]||(this._exprCache[t]=new s(t,{state:"JST"}).expression());return e},Parser:s,Lexer:i}),h.mixTo(p),c.extend(p.prototype,{init:function(){},$compile:function(t,e){"string"==typeof t&&(t=new s(t).parse());var r;e&&this._record();var n=this._walk(t);if(e){r=this._release();var i=this;r.length&&(n.ondestroy=function(){i.$unwatch(r)})}return n},$update:function(t,e){if("function"==typeof t)t.call(this,this.data);else if(t){var t=(this.data,p.parse(t));t.set(this,e)}for(var r=this,n=r;r=r.$parent;)n=r;n.$digest()},_digest:function(t,e){var r=this.$watchers,n=this.$children;if(r&&r.length){for(var i=!1,s=0,a=r.length;a>s;s++){var o=r[s];if(o){var u=o.get(this),h=(o.last,!0);if("object"==c.typeOf(u)&&e)if(o.last){for(var l in u)if(o.last[l]!==u[l]){h=!1;break}if(h!==!1)for(var l in o.last)if(o.last[l]!==u[l]){h=!1;break}}else h=!1;else h=c.equals(u,o.last);h===!1||o.force?(h=!1,o.force=null,o.fn.call(this,u,o.last),o.last="object"!=typeof u?c.clone(u):u):"array"==c.typeOf(h)&&h.length?(o.fn.call(this,u,h),o.last=c.clone(u)):h=!0,h!==!0&&(i=!0)}}if(n&&(a=n.length))for(var s=0;a>s;s++)n[s]._digest()&&(i=!0);return i&&this.$emit("update"),i}},$new:function(t,e){var r,n=typeof t;if("string"===n?r=p.component(t):"function"===n&&(r=t),r){var i=new r(e,{$parent:this});this.$children.push(i)}return i},$digest:function(t){if("digest"!==this.$phase){this.$phase="digest";for(var e=!1,r=0;e=this._digest(t);)if(r++,r>20)throw"there may a circular dependencies in this Component";this.$phase=null}},$watch:function(t,e,r){r=r||{};var n=c.uid("w_"),t=p.parse(t),i={get:t.get,fn:e,pathes:t.pathes,id:n,force:r.force};return this.$watchers.push(i),this._records&&this._records.push(i.id),n},$unwatch:function(t){if(Array.isArray(t))for(var e=0,r=t.length;r>e;e++)this.$unwatch(t[e]);else{var n,r,i=this.$watchers;if(!t||!i||!(r=i.length))return;for(;r--;)n=i[r],n&&n.id===t&&i.splice(r,1)}},find:function(t){return this.$refs[t]},destroy:function(){this.$emit("destroy"),this.group.destroy(),this.$watchers=null,this.$children=null,this.$parent=null,this.$refs=null,this.$off()},inject:function(t,e){e=e||"bottom";var r,n,i=this.element||l.node(this);switch("string"==typeof t&&(t=document.getElementById(t)),e){case"bottom":t.appendChild(i);break;case"top":(r=t.firstChild)?t.insertBefore(i,t.firstChild):t.appendChild(i);break;case"after":(n=t.nextSibling)?n.parentNode.insertBefore(i,n):n.parentNode.appendChild(i);break;case"before":t.parentNode.insertBefore(i,t)}return this},_path:c._path,_record:function(){this._records=[]},_release:function(){var t=this._records;return this._records=null,t},_walk:function(t){if("array"===c.typeOf(t)){for(var e=[],r=0,n=t.length;n>r;r++)e.push(this._walk(t[r]));return new u(e)}return"string"==typeof t?document.createTextNode(t):d[t.type||"default"].call(this,t)},_f:function(t){var e=p.filter(t);if("function"!=typeof e)throw"filter "+t+"is undefined";return e}});var d={};d.list=function(t){function e(e,a){if(a&&a.length){for(var o=0,u=e.length,h=(a[0].index,0);h<a.length;h++){for(var f=a[h],p=f.index,d=o;p>d;d++){var v=s.get(d);v.data.$index=d}for(var g=0,m=f.removed.length;m>g;g++){var y=s.children.splice(p,1)[0];y.destroy(),y=null}for(var T=p;T<p+f.add;T++){var E=e[T],x=c.createObject(i.data);x.$index=T,x[t.variable]=E;var N=i.$new(n,x);N.$update();var _=s.children.length&&0!==T?l.last(s):r;r.parentNode.insertBefore(l.node(N),_.nextSibling),s.children.splice(T,0,N)}o=p+f.add-f.removed.length,o=0>o?0:o}if(u>o)for(var h=o;u>h;h++){var S=s.get(h);S.data.$index=h}}}var r=document.createComment("Regular list"),n=p.derive({template:t.body,context:this.context}),i=this,s=new u;if(t.sequence&&"expression"===t.sequence.type)var a=this.$watch(t.sequence,e);else e(t.sequence,c.equals(t.sequence,[]));return{node:function(){return r},group:s,destroy:function(){s.destroy(),a&&i.$unwatch(a),i=null}}},d.template=function(t){var e,e,r=t.content,n=document.createComment("template");if(r){var i=this;this.$watch(r,function(t){e&&e.destroy(),this._record(),e=i.$compile(t,!0);this._release();a=l.node(e),n.parentNode&&n.parentNode.insertBefore(a,n)})}return{node:function(){return n},last:function(){return e.last()},destroy:function(){e&&e.destroy()}}},d["if"]=function(t){function e(e){e?(r=a.$compile(t.consequent,!0),i=l.node(r),n&&n.destroy(),n=null,s.parentNode&&s.parentNode.insertBefore(i,s)):(r&&r.destroy(),r=null,t.alternate&&(n=a.$compile(t.alternate,!0)),i=l.node(n),s.parentNode&&s.parentNode.insertBefore(i,s))}var r,n,i,s=document.createComment("Regular if"),a=this;return this.$watch(t.test,e,{force:!0}),{node:function(){return s},last:function(){var t=r||n;return t&&t.last()},destroy:function(){n&&n.destroy(),r&&r.destroy()}}},d.expression=function(t){{var e=document.createTextNode("");this.$watch(t,function(t){o.text(e,""+(null==t?"":String(t)))})}return e},d.text=function(t){var e=document.createTextNode(t.text);return e},d.element=function(t){var e,r=t.attrs,i=[];if(e=this.$new(t.tag)){for(var s=0,a=r.length;a>s;s++){var h=r[s],f=h.value||"";if("ref"===h.name&&f&&(this.$refs[h.value]=e),"expression"===f.type){var p=h.name;i.push(this.$watch(f,function(t){"&"===p?(e.data=t,e.$update()):e.$update(p,t)}))}else e.data[h.name]=f}return e}for(var d,v=o.create(t.tag),g=t.children,m=this,s=0,a=r.length;a>s;s++)i.push.apply(i,n.call(this,v,r[s]));if(g&&g.length)for(var y=new u,s=0,a=g.length;a>s;s++)d=this.$compile(g[s]),null!==d&&y.push(d);return{node:function(){return y&&!c.isVoidTag(t.tag)&&v.appendChild(l.node(y)),v},last:function(){return v},destroy:function(){y&&y.destroy();for(var t=0,e=i.length;e>t;t++)m.$unwatch(i[t]);o.remove(v)}}},r.exports=p}),t.register("regularjs/src/util.js",function(t,e,r){e("./helper/shim.js");var n=r.exports,i=[].slice,s={}.toString;n.uid=function(){var t=0;return function(){return t++}}(),n.varName="d_"+n.uid(),n.setName="p_"+n.uid(),n.randomVar=function(t){return(t||"var")+"_"+n.uid().toString(36)},n.host="data",n.slice=function(t,e,r){return i.call(t,e,r)},n.typeOf=function(t){return null==t?String(t):{}.toString.call(t).slice(8,-1).toLowerCase()},n.extend=function(t,e,r){if("array"===n.typeOf(r))for(var i=0,s=r.length;s>i;i++){var a=r[i];t[a]=e[a]}else for(var i in e)("undefined"==typeof t[i]||r===!0)&&(t[i]=e[i]);return t},n.makePredicate=function(t,e){function r(t){if(1===t.length)return n+="return str === "+t[0]+";";n+="switch(str){";for(var e=0;e<t.length;++e)n+="case '"+t[e]+"':";n+="return true}return false;"}"string"==typeof t&&(t=t.split(" "));var n="",i=[];t:for(var s=0;s<t.length;++s){for(var a=0;a<i.length;++a)if(i[a][0].length===t[s].length){i[a].push(t[s]);continue t}i.push([t[s]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),n+="var prefix = "+(e?"true":"false")+";if(prefix) str = str.replace(/^-(?:\\w+)-/,'');switch(str.length){";for(var s=0;s<i.length;++s){var o=i[s];n+="case "+o[0].length+":",r(o)}n+="}"}else r(t);return new Function("str",n)};var a=/\r\n|[\n\r\u2028\u2029]/g;n.trackErrorPos=function(t,e){a.lastIndex=0;for(var r,n,i=1,s=0,o=t.length;n=a.exec(t);)n.index<e?(++i,s=n.index+1):r=n.index;r||(r=o-1);var u=e-10;s>u&&(u=s);var c=e+10;c>r&&(c=r);var h=t.slice(u,c+1),l=i+"> "+(u>=s?"...":""),f=r>c?"...":"";return l+h+f+"\n"+new Array(l.length+e-u+1).join(" ")+"^"};var o=/\(\?\!|\(\?\:|\?\=/g;n.findSubCapture=function(t){var e=0,r=0,n=t.length,i=t.match(o);for(i=i?i.length:0;n--;){var s=t.charAt(n);(0===n||"\\"!==t.charAt(n-1)||"?"!==t.charAt(n+1))&&("("===s&&e++,")"===s&&r++)}if(e!==r)throw"RegExp: "+t+"'s bracket is not marched";return e-i},n.escapeRegExp=function(t){return t.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(t){return"\\"+t})},n.assert=function(t,e){if(!t)throw e;return!0},n.walk=function(t){var e={};return t.walk=function(t,r){if("[object Array]"===s.call(t)){for(var n=[],i=0,a=t.length;a>i;i++)n.push(this.walk(t[i]));return n}return e[t.type||"default"].call(this,t,r)},e},n.isEmpty=function(t){return!t||0===t.length},n.compileGetter=function(t){for(var e="obj",r="if("+e+" != null",n=0,i=t.length;i>n;n++)e+="['"+t[n]+"']",r+="&&"+e+"!=null";return r+=") return "+e+";\n",r+="else return undefined",new Function("obj",r)},n.createObject=function(t,e){function r(){}r.prototype=t;var i=new r;return e&&n.extend(i,e),i},n.createProto=function(t,e){function r(){this.constructor=t}return r.prototype=e,t.prototype=new r},n.derive=function(){function t(t,e,r){return function(){var n=this.supr;this.supr=r[t];var i=e.apply(this,arguments);return this.supr=n,i}}function e(e,n,s){for(var a in n)n.hasOwnProperty(a)&&(e[a]=i(n[a])&&i(s[a])&&r.test(n[a])?t(a,n[a],s):n[a])}var r=/xy/.test(function(){})?/\bsupr\b/:/.*/,i=function(t){return"function"==typeof t};return function(t){function r(){s.apply(this,arguments)}var i,s=this,a=s.prototype;return i=n.createProto(r,a),(r.use=function(t){return e(i,t,a),r})(t),s.__after__&&s.__after__.call(r,s,t),r.derive=s.derive,r}}(),n.clone=function(t){var e=n.typeOf(t);if("array"==e){for(var r=[],i=0,s=t.length;s>i;i++)r[i]=t[i];return r}if("object"==e){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r}return t},n.equals=function(t,e){if("array"==n.typeOf(t)){var r=u(t,e||[]);return r}return t===e};var u=function(){function t(t,e){return t===e}function e(e,r){for(var n=e.length,i=r.length,s=[],a=0;n>=a;a++)s.push([a]);for(var o=1;i>=o;o++)s[0][o]=o;for(var a=1;n>=a;a++)for(var o=1;i>=o;o++)s[a][o]=t(e[a-1],r[o-1])?s[a-1][o-1]:Math.min(s[a-1][o]+1,s[a][o-1]+1);return s}function r(t,r){for(var n=e(r,t),i=r.length,s=i,a=t.length,o=a,u=[],c=n[s][o];s>0||o>0;)if(0!=s)if(0!=o){var h=n[s-1][o-1],l=n[s-1][o],f=n[s][o-1],p=Math.min(f,l,h);p==h?(h==c?u.unshift(0):(u.unshift(1),c=h),s--,o--):p==l?(u.unshift(2),s--,c=l):(u.unshift(3),o--,c=f)}else u.unshift(2),s--;else u.unshift(3),o--;var d=0,v=3,g=2,m=1,i=0;a=0;for(var y=[],T={index:null,add:0,removed:[]},s=0;s<u.length;s++)switch(u[s]>0?null==T.index&&(T.index=a):null!=T.index&&(y.push(T),T={index:null,add:0,removed:[]}),u[s]){case d:i++,a++;break;case v:T.add++,a++;break;case g:T.removed.push(r[i]),i++;break;case m:T.add++,T.removed.push(r[i]),i++,a++}return null!=T.index&&y.push(T),y}return r}();n._path=function(t,e){return void 0==t?t:t[e]},n.throttle=function(t,e){var r,n,i,e=e||100,s=null,a=0,o=function(){a=+new Date,s=null,i=t.apply(r,n),r=n=null};return function(){var u=+new Date,c=e-(u-a);return r=this,n=arguments,0>=c||c>e?(clearTimeout(s),s=null,a=u,i=t.apply(r,n),r=n=null):s||(s=setTimeout(o,c)),i}},n.escape=function(){var t=/&/g,e=/</g,r=/>/g,n=/\'/g,i=/\"/g,s=/[&<>\"\']/;return function(a){return s.test(a)?a.replace(t,"&amp;").replace(e,"&lt;").replace(r,"&gt;").replace(n,"&#39;").replace(i,"&quot;"):a}}(),n.cache=function(t){t=t||1e3;var e=[],r={};return{set:function(t,n){return e.length>this.max&&(r[e.shift()]=null),void 0==r[t]&&e.push(t),r[t]=n,n},get:function(t){return void 0===t?r:r[t]},max:t,len:function(){return e.length}}},n.isVoidTag=n.makePredicate("area base br col embed hr img input keygen link menuitem meta param source track wbr")}),t.register("regularjs/src/env.js",function(t){t.svg=function(){return"undefined"!=typeof document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),t.transition=void 0}),t.register("regularjs/src/index.js",function(t,e,r){r.exports=e("./Regular.js"),e("./directive/base.js")}),t.register("regularjs/src/dom.js",function(t,e,r){function n(t,e){return"change"==e&&a.msie<9&&t&&t.tagName&&"input"===t.tagName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)?"click":e}var i,s,a=r.exports,o=(e("./env.js"),e("./util"),document.createElement("div"));a.tNode=o,o.addEventListener?(i=function(t,e,r){t.addEventListener(e,r,!1)},s=function(t,e,r){t.removeEventListener(e,r,!1)}):(i=function(t,e,r){t.attachEvent("on"+e,r)},s=function(t,e,r){t.detachEvent("on"+e,r)}),a.msie=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1]),isNaN(a.msie)&&(a.msie=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])),a.id=function(t){return document.getElementById(t)},a.create=function(t,e){return e?document.createElementNS(t,e):document.createElement(t)},a.fragment=function(){return document.createDocumentFragment()};var u={};"multiple,selected,checked,disabled,readOnly,required,open".split(",").forEach(function(t){u[t]=t}),a.attr=function(t,e,r){if(e=e.toLowerCase(),u[e]){if("undefined"==typeof r)return t[e]||(t.attributes.getNamedItem(e)||noop).specified?e:void 0;r?(t[e]=!0,t.setAttribute(e,e)):(t[e]=!1,t.removeAttribute(e))}else if("undefined"!=typeof r)"class"===e?t.className=r:t.setAttribute(e,r);else if(t.getAttribute){var n=t.getAttribute(e,2);return null===n?void 0:n}};a.on=function(t,e,r){e=n(t,e),"attachEvent"in t&&(r.real=r.bind(t)),i.call(a,t,e,r.real||r)},a.off=function(t,e,r){e=n(t,e),"detachEvent"in t&&(r=r.real),s.call(a,t,e,r)},a.text=function(){var t={};return a.msie&&a.msie<9?(t[1]="innerText",t[3]="nodeValue"):t[1]=t[3]="textContent",function(e,r){var n=t[e.nodeType];return null==r?n?e[n]:"":void(e[n]=r)}}(),a.html=function(t){return"undefined"==typeof t?node.innerHTML:void(node.innerHTML=t)},a.replace=function(t,e){e.parentNode&&e.parentNode.replaceChild(t,e)},a.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)},a.css=function(t,e,r){if("undefined"!=typeof r){var n;return a.msie<=8&&(n=t.currentStyle&&t.currentStyle[e],""===n&&(n="auto")),n=n||t.style[e],a.msie<=8&&(n=""===n?void 0:n),n}t.style[e]=r},a.addClass=function(t,e){var r=t.className||"";-1===(" "+r+" ").indexOf(" "+e+" ")&&(t.className=r+" "+e)},a.delClass=function(t,e){var r=t.className||"";t.className=(" "+r+" ").replace(" "+e+" "," ").trim()},a.hasClass=function(t,e){var r=t.className||"";return-1!==(" "+r+" ").indexOf(" "+e+" ")}}),t.register("regularjs/src/group.js",function(t,e,r){function n(t){this.children=t||[]}var i=e("./util"),s=(e("./dom"),e("./helper/combine"));i.extend(n.prototype,{destroy:function(){s.destroy(this.children),this.ondestroy&&this.ondestroy(),this.children=null},get:function(t){return this.children[t]},push:function(t){this.children.push(t)}}),r.exports=n}),t.register("regularjs/src/parser/Lexer.js",function(t,e,r){function n(t){return function(e){return{type:t,value:e}}}function i(t,e){return function(){return{type:t,value:arguments[e]}}}function s(t,e){this.input=(t||"").trim(),this.opts=e||{},this.map=2!=this.opts.mode?d:v,this.states=["INIT"],this.opts.state&&this.states.push(this.opts.state)}function a(t){for(var e,r,n={},i=0,s=t.length;s>i;i++)e=t[i],r=e[2]||"INIT",(n[r]||(n[r]={rules:[],links:[]})).rules.push(e);return o(n)}function o(t){var e,r,s,a,o,c,h;for(var l in t){e=t[l],e.curIndex=1,r=e.rules,s=[];for(var p=0,d=r.length;d>p;p++){if(h=r[p],o=h[0],a=h[1],"string"==typeof a)if(~a.indexOf(":")){var v=a.split(":"),g=v[0],m=parseInt(v[1].replace("$",""));a=i(g,m)}else a=n(a);"regexp"==u.typeOf(o)&&(o=o.toString().slice(1,-1)),o=o.replace(/\{(\w+)\}/g,function(t,e){return"string"==typeof f[e]?u.escapeRegExp(f[e]):String(f[e]).slice(1,-1)}),c=u.findSubCapture(o)+1,e.links.push([e.curIndex,c,a]),e.curIndex+=c,s.push(o)}e.TRUNK=new RegExp("^(?:("+s.join(")|(")+"))")}return t}var u=e("../util.js"),c=/a|(b)/.exec("a"),h=c&&void 0===c[1]?function(t){return void 0!==t}:function(t){return!!t},l=s.prototype;l.lex=function(t){t=(t||this.input).trim();{var e,r,n,i,s,a=[];this.input=t}this.index=0;for(var o=0;t;)o++,s=this.state(),e=this.map[s],r=e.TRUNK.exec(t),r||this.error("Unrecoginized Token"),n=r[0].length,t=t.slice(n),i=this._process.call(this,r,e,t),i&&a.push(i),this.index+=n;return a.push({type:"EOF"}),a},l.next=function(){var t=this.map[this.state()],e=t.TRUNK.exec(str);e||this.error("Unrecoginized Token");var r=e[0].length,n=this._process.apply(this,e);return this.input=this.input.slice(r),n},l.error=function(t){throw"Parse Error: "+t+":\n"+u.trackErrorPos(this.input,this.index)},l._process=function(t,e,r){for(var n=e.links,i=!1,s=n.length,a=0;s>a;a++){var o=n[a],u=o[2],c=o[0];if(h(t[c])){if(i=!0,u){var l=u.apply(this,t.slice(c,c+o[1]));l&&(l.pos=this.index)}break}}if(!i)switch(r.charAt(0)){case"<":this.enter("TAG");break;default:this.enter("JST")}return l},l.enter=function(t){return this.states.push(t),this},l.state=function(){var t=this.states;return t[t.length-1]},l.leave=function(t){var e=this.states;t&&e[e.length-1]!==t||e.pop()};var f={BEGIN:"{{",END:"}}",NAME:/(?:[:_A-Za-z][-\.:_0-9A-Za-z]*)/,IDENT:/[\$_A-Za-z][-_0-9A-Za-z\$]*/,SPACE:/[\r\n\f ]/},p={ENTER_JST:[/[^\x00\<]*?(?={BEGIN})/,function(t){return this.enter("JST"),t?{type:"TEXT",value:t}:void 0}],ENTER_JST2:[/[^\x00]*?(?={BEGIN})/,function(t){return this.enter("JST"),t?{type:"TEXT",value:t}:void 0}],ENTER_TAG:[/[^\x00<>]*?(?=<)/,function(t){return this.enter("TAG"),t?{type:"TEXT",value:t}:void 0}],TEXT:[/[^\x00]+/,"TEXT"],TAG_NAME:[/{NAME}/,"NAME","TAG"],TAG_UNQ_VALUE:[/[^&"'=><`\r\n\f ]+/,"UNQ","TAG"],TAG_OPEN:[/<({NAME})\s*/,function(t,e){return{type:"TAG_OPEN",value:e.toLowerCase()}},"TAG"],TAG_CLOSE:[/<\/({NAME})[\r\n\f ]*>[\r\n\f ]*/,function(t,e){return this.leave(),{type:"TAG_CLOSE",value:e}},"TAG"],TAG_ENTER_JST:[/(?={BEGIN})/,function(){this.enter("JST")},"TAG"],TAG_PUNCHOR:[/[\>\/=&]/,function(t){return">"===t&&this.leave(),{type:t,value:t}},"TAG"],TAG_STRING:[/'([^']*)'|"([^"]*)"/,function(t,e,r){return{type:"STRING",value:e||r}},"TAG"],TAG_SPACE:[/{SPACE}+/,null,"TAG"],TAG_COMMENT:[/\<\!--([^\x00]*?)--\>/,null,"TAG"],JST_OPEN:["{BEGIN}#{SPACE}*({IDENT})",function(t,e){return{type:"OPEN",value:e}},"JST"],JST_PART_OPEN:["{BEGIN}~",function(t,e){return{type:"PART_OPEN",value:e}},"JST"],JST_LEAVE:[/{END}/,function(){return this.leave("JST"),{type:"END"}},"JST"],JST_CLOSE:[/{BEGIN}\s*\/\s*({IDENT})\s*{END}/,function(t,e){return this.leave("JST"),{type:"CLOSE",value:e}},"JST"],JST_COMMENT:[/{BEGIN}\!([^\x00]*?)\!{END}/,function(){this.leave()},"JST"],JST_EXPR_OPEN:["{BEGIN}",function(t,e){var r="="==e;return{type:"EXPR_OPEN",escape:r}},"JST"],JST_IDENT:["{IDENT}","IDENT","JST"],JST_SPACE:[/[ \r\n\f]+/,null,"JST"],JST_PUNCHOR:[/[=!]?==|[-=><+*\/%\!]?\=|\|\||&&|[\<\>\[\]\(\)\-\|\{}\+\*\/%?:\.!,]/,function(t){return{type:t,value:t}},"JST"],JST_STRING:[/'([^']*)'|"([^"]*)"/,function(t,e,r){return{type:"STRING",value:null==e?r:e}},"JST"],JST_NUMBER:[/-?(?:[0-9]*\.[0-9]+|[0-9]+)(e\d+)?/,function(t){return{type:"NUMBER",value:parseFloat(t,10)}},"JST"]},d=a([p.ENTER_JST,p.ENTER_TAG,p.TEXT,p.TAG_NAME,p.TAG_OPEN,p.TAG_CLOSE,p.TAG_PUNCHOR,p.TAG_ENTER_JST,p.TAG_UNQ_VALUE,p.TAG_STRING,p.TAG_SPACE,p.TAG_COMMENT,p.JST_OPEN,p.JST_PART_OPEN,p.JST_CLOSE,p.JST_COMMENT,p.JST_EXPR_OPEN,p.JST_IDENT,p.JST_SPACE,p.JST_LEAVE,p.JST_NUMBER,p.JST_PUNCHOR,p.JST_STRING,p.JST_COMMENT]),v=a([p.ENTER_JST2,p.TEXT,p.JST_COMMENT,p.JST_OPEN,p.JST_PART_OPEN,p.JST_CLOSE,p.JST_EXPR_OPEN,p.JST_IDENT,p.JST_SPACE,p.JST_LEAVE,p.JST_NUMBER,p.JST_PUNCHOR,p.JST_STRING,p.JST_COMMENT]);r.exports=s}),t.register("regularjs/src/parser/node.js",function(t,e,r){r.exports={element:function(t,e,r){return{type:"element",tag:t,attrs:e,children:r}},attribute:function(t,e){return{type:"attribute",name:t,value:e}},"if":function(t,e,r){return{type:"if",test:t,consequent:e,alternate:r}},list:function(t,e,r){return{type:"list",sequence:t,variable:e,body:r}},expression:function(t,e,r){return{type:"expression",get:t,set:e,depend:r}},text:function(t){return t},interplation:function(t){return{type:"interplation",expression:t}},template:function(t){return{type:"template",content:t}}}}),t.register("regularjs/src/parser/Parser.js",function(t,e,r){function n(t,e){e=e||{},this.input=t,this.tokens=new a(t,e).lex(),this.pos=0,this.length=this.tokens.length}var i=e("../util.js"),s=e("./node.js"),a=e("./Lexer.js"),o=i.varName,u=i.randomVar("c"),c=i.makePredicate("STRING IDENT NUMBER"),h=i.makePredicate("true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt Object"),t={_path:i._path},l=(n.cache=i.cache(1e3),n.prototype);l.parse=function(){return this.pos=0,this.program()},l.ll=function(t){t=t||1,0>t&&(t+=1);var e=this.pos+t-1;return e>this.length-1?this.tokens[this.length-1]:this.tokens[e]},l.la=function(t){return(this.ll(t)||"").type},l.match=function(t,e){if(r=this.eat(t,e))return r;var r=this.ll();this.error("expect ["+t+(null==e?"":":"+e)+']" -> got "['+r.type+(null==e?"":":"+r.value)+"]",r.pos)},l.error=function(t,e){throw console.log(this.ll()),"Parse Error: "+t+":\n"+i.trackErrorPos(this.input,null!=e?e:this.ll().pos)},l.next=function(t){t=t||1,this.pos+=t},l.eat=function(t,e){var r=this.ll();if("string"!=typeof t){for(var n=t.length;n--;)if(r.type==t[n])return this.next(),r}else if(r.type==t&&("undefined"==typeof e||r.value==e))return this.next(),r;return!1},l.isEmpty=function(t){return!t||t.length},l.program=function(){for(var t=[],e=this.ll();"EOF"!==e.type&&"TAG_CLOSE"!==e.type;)t.push(this.statement()),e=this.ll();return t},l.statements=function(t){for(var e,r=[];!(e=this.eat("CLOSE",t));)r.push(this.statement());return r},l.statement=function(){var t=this.ll();switch(t.type){case"NAME":case"TEXT":var e=t.value;for(this.next();t=this.eat(["NAME","TEXT"]);)e+=t.value;return{type:"text",text:e};case"TAG_OPEN":return this.xml();case"OPEN":return this.directive();case"EXPR_OPEN":return this.interplation();case"PART_OPEN":return this.template();default:this.error("Unexpected token: "+this.la())}},l.xml=function(){var t,e,r,n;return t=this.match("TAG_OPEN").value,e=this.attrs(),n=this.eat("/"),this.match(">"),n||i.isVoidTag(t)||(r=this.program(),this.eat("TAG_CLOSE",t)||this.error("expect </"+t+"> gotno matched closeTag")),s.element(t,e,r)},l.attrs=function(){for(var t,e,r=[];e=this.eat(["NAME","&"]);)t={name:e.value},this.eat("=")&&(t.value=this.attvalue()),r.push(t);return r},l.attvalue=function(){var t=this.ll();switch(t.type){case"NAME":case"UNQ":case"STRING":this.next();var e=t.value;if("expression"!==e.type&&~e.indexOf("{{")){var r=new n(e,{mode:2}).parse(),i=function(t){var e=r.map(function(e){return e&&e.get?e.get(t):e||""}).join("");return e};e=s.expression(i,null)}return e;case"EXPR_OPEN":return this.interplation();default:this.error("Unexpected token: "+this.la())}return t.value},l.directive=function(t){return t=t||this.ll().value,"function"==typeof this[t]?this[t]():void this.error("Undefined directive["+t+"]")},l.interplation=function(){var t=(this.match("EXPR_OPEN").nowatch,this.expression(!0));return this.match("END"),t},l.template=function(){this.next();var t=this.expression();return this.match("END"),s.template(t)},l["if"]=function(){this.next();var t=this.expr(),e=[],r=[],n=e;this.match("END");for(var i,a;!(a=this.eat("CLOSE"));)if(i=this.ll(),"OPEN"==i.type)switch(i.value){case"else":n=r,this.next(),this.match("END");break;case"elseif":return r.push(this["if"]()),s["if"](t,e,r);default:n.push(this.statement())}else n.push(this.statement());return"if"!==a.value&&this.error("Unmatched if directive"),s["if"](t,e,r)},l.list=function(){this.next();var t,e,r=this.expression(),n=[],i=[],a=n;for(this.match("IDENT","as"),t=this.match("IDENT").value,this.match("END");!(e=this.eat("CLOSE"));)this.eat("OPEN","else")?(a=i,this.match("END")):a.push(this.statement());return"list"!==e.value&&this.error("expect {/list} got {/"+e.value+"}",e.pos),s.list(r,t,n,i)},l.expression=function(){var t=this.expr();return t.depend?t:t.get},l.expr=function(){this.depend=[];var e,r,n=this.filter(),a=n.get||n,c=this.depend.length?"var "+u+"=context.context||context;var "+o+"=context.data;":"",r=new Function("context",c+"return ("+a+")");if(n.set)var e=new Function("context",i.setName,c+";return ("+n.set+")");return this.depend.length?s.expression(r,e,this.depend):s.expression(r.call(t))},l.filter=function(){var t,e,r=this.assign(),n=this.eat("|");if(n){t=["(function(data){","var ",e=i.randomVar("f"),"=",r.get,";"];do t.push(e+" = "+u+"._f('"+this.match("IDENT").value+"')("+e),t.push(this.eat(":")?", "+this.arguments("|").join(",")+");":");");while(n=this.eat("|"));return t.push("return "+e+"})()"),this.getset(t.join(""))}return r},l.assign=function(){var t,e=this.condition();return(t=this.eat(["=","+=","-=","*=","/=","%="]))?(e.set||this.error("invalid lefthand expression in assignment expression"),this.getset("("+e.get+t.type+this.condition().get+")",e.set)):e},l.condition=function(){var t=this.or();return this.eat("?")?this.getset([t.get+"?",this.assign().get,this.match(":").type,this.assign().get].join("")):t},l.or=function(){var t=this.and();return this.eat("||")?this.getset(t.get+"||"+this.or().get):t},l.and=function(){var t=this.equal();return this.eat("&&")?this.getset(t.get+"&&"+this.and().get):t},l.equal=function(){var t,e=this.relation();return(t=this.eat(["==","!=","===","!=="]))?this.getset(e.get+t.type+this.equal().get):e},l.relation=function(){var t,e=this.additive();return(t=this.eat(["<",">",">=","<="])||this.eat("IDENT","in"))?this.getset(e.get+t.value+this.relation().get):e},l.additive=function(){var t,e=this.multive();return(t=this.eat(["+","-"]))?this.getset(e.get+t.value+this.additive().get):e},l.multive=function(){var t,e=this.unary();return(t=this.eat(["*","/","%"]))?this.getset(e.get+t.type+this.multive().get):e},l.unary=function(){var t;return(t=this.eat(["+","-","~","!"]))?this.getset("("+t.type+this.unary().get+")"):this.member()},l.member=function(t,e,r){var n,s;if(t)"string"==typeof e&&c(e)?r.push(e):(r&&r.length&&this.depend.push(r),r=null);else{s=this.primary();var a=typeof s;"string"===a?(r=[],"$self"===s?(r.push("*"),t=o):(r.push(s),e=s,t=o+"['"+s+"']")):"this"===s.get?(t=u,r=["this"]):(r=null,t=s.get)}if(n=this.eat(["[",".","("]))switch(n.type){case".":var h=this.match("IDENT").value;return t+="['"+h+"']",this.member(t,h,r);case"[":return s=this.assign(),r&&r.length?t=u+"._path("+t+", "+s.get+")":t+="['"+s.get+"']",this.match("]"),this.member(t,s,r);case"(":var l=this.arguments().join(",");return t="(typeof ("+t+") !=='function'?"+t+"("+l+"):"+t+(".call("+u+(l?","+l:"")+"))"),this.match(")"),this.member(t,null,r)}r&&r.length&&this.depend.push(r);var f={get:t};return e&&(f.set=t+"="+i.setName),f},l.arguments=function(t){t=t||")";var e=[];do this.la()!==t&&e.push(this.assign().get);while(this.eat(","));return e},l.primary=function(){var t=this.ll();switch(t.type){case"{":return this.object();case"[":return this.array();case"(":return this.paren();case"STRING":return this.next(),this.getset("'"+t.value+"'");case"NUMBER":return this.next(),this.getset(t.value);case"IDENT":return this.next(),h(t.value)?this.getset(t.value):t.value;default:this.error("Unexpected Token: "+t.type)}},l.object=function(){for(var t,e=[this.match("{").type];;){if(t=this.eat(["STRING","IDENT","NUMBER"]),!t){e.push(this.match("}").type);break}e.push("'"+t.value+"'"+this.match(":").type),e.push(this.assign().get),this.eat(",")&&e.push(",")}return{get:e.join("")}},l.array=function(){for(var t,e=[this.match("[").type];(t=this.assign())&&(e.push(t.get),this.eat(","));)e.push(",");return e.push(this.match("]").type),{get:e.join("")}},l.paren=function(){this.match("(");var t=this.filter();return t.get="("+t.get+")",this.match(")"),t},l.getset=function(t,e){return{get:t,set:e}},l.flatenDepend=function(t){for(var e=0,r=t.length;r>e;e++);},r.exports=n}),t.register("regularjs/src/helper/shim.js",function(){function t(t,e){for(var r in e)void 0===t[r]&&(t[r]=e[r])}var e=[].slice,r={}.toString;t(String.prototype,{trim:function(){return this.replace(/^\s+|\s+$/g,"")}}),t(Array.prototype,{indexOf:function(t,e){e=e||0;for(var r=e,n=this.length;n>r;r++)if(this[r]===t)return r;return-1},forEach:function(t,e){for(var r=0,n=this.length;n>r;r++)t.call(e,this[r],r,this)},filter:function(t,e){for(var r=[],n=0,i=this.length;i>n;n++){var s=t.call(e,this[n],n,this);s&&r.push(this[n])}return r},map:function(t,e){for(var r=[],n=0,i=this.length;i>n;n++)r.push(t.call(e,this[n],n,this));return r}}),t(Function.prototype,{bind:function(t){var r=this,n=e.call(arguments,1);return function(){var i=n.concat(e.call(arguments));return r.apply(t,i)}}}),t(Object,{keys:function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}}),t(Date,{now:function(){return+new Date}}),t(Array,{isArray:function(t){return"[object Array]"===r.call(t)}})}),t.register("regularjs/src/helper/event.js",function(t,e,r){function n(){arguments.length&&this.$on.apply(this,arguments)}var i=[].slice,s=e("../util.js"),a={$on:function(t,e){if("object"==typeof t)for(var r in t)this.$on(r,t[r]);else{var n=this._handles||(this._handles={}),i=n[t]||(n[t]=[]);i.push(e)}return this},$off:function(t,e){if(this._handles){var r,n=this._handles;if(r=n[t]){if(!e)return n[t]=[],this;for(var i=0,s=r.length;s>i;i++)if(e===r[i])return r.splice(i,1),this}return this}},$emit:function(t){var e,r=i.call(arguments,1),n=this._handles,s=this.$parent;if(s&&s.$emit.apply(s,arguments),!n||!(e=n[t]))return this;
for(var a=0,o=e.length;o>a;a++)e[a].apply(this,r);return this},$broadcast:function(){}};s.extend(n.prototype,a),n.mixTo=function(t){t="function"==typeof t?t.prototype:t,s.extend(t,a)},r.exports=n}),t.register("regularjs/src/helper/combine.js",function(t,e,r){var n=e("../dom.js"),i=r.exports={node:function(t){var e;if("function"==typeof t.node)return t.node();if("number"==typeof t.nodeType)return t;if(t.group)return i.node(t.group);if(e=t.children){for(var r=n.fragment(),s=0,a=e.length;a>s;s++)r.appendChild(i.node(e[s]));return r}},last:function(t){var e=t.children;return"function"==typeof t.last?t.last():"number"==typeof t.nodeType?t:e&&e.length?i.last(e[e.length-1]):t.group?i.last(t.group):void 0},destroy:function(t){if(t){if(Array.isArray(t))for(var e=0,r=t.length;r>e;e++)i.destroy(t[e]);var s=t.children;return"function"==typeof t.destroy?t.destroy():"number"==typeof t.nodeType?n.remove(t):void(s&&s.length&&(i.destroy(t),t.children=null))}}}}),t.register("regularjs/src/directive/base.js",function(t,e){function r(){}function n(t,e){var r=!1,n=this;this.$watch(e,function(e){r||t.value!==e&&(t.value=null==e?"":""+e)});var i=function(t){var i=(t.srcElement||t.target).value;e.set(n,i),r=!0,n.$update(),r=!1};9!==s.msie&&"oninput"in s.tNode?t.addEventListener("input",i):(s.on(t,"paste",i),s.on(t,"keypress",i),s.on(t,"cut",i))}function i(t,e){var r=!1,n=this;this.$watch(e,function(e){r||(t.checked=!!e)});var i=function(){var t=this.checked;e.set(n,t),r=!0,n.$update(),r=!1};e.set&&s.on(t,"change",i)}var s=(e("../util.js"),e("../dom.js")),a=e("../Regular.js"),o="click dblclick mouseover mouseout change focus blur keydown keyup keypress".split(" ");o.forEach(function(t){a.directive("r-"+t,function(e,r){if(r){var n=this;s.on(e,t,function(t){n.data.$event=t,r.get(n),n.data.$event=null,n.$update()})}})}),a.directive("r-enter",function(t,e){if(e){var r=this;s.on(t,"keypress",function(t){(13==t.which||13==t.keyCode)&&(e.get(r),r.$update())})}}),a.directive("r-model",function(t,e){var s=t.tagName.toLowerCase();switch("string"==typeof e&&(e=a.parse(e)),s){case"select":r.call(this,t,e);break;case"input":"checkbox"===t.type?i.call(this,t,e):n.call(this,t,e);default:n.call(this,t,e)}}).directive("proxy",function(){})}),t.alias("regularjs/src/index.js","regularjs/index.js"),"object"==typeof exports?module.exports=t("regularjs"):"function"==typeof define&&define.amd?define(function(){return t("regularjs")}):window.Regular=t("regularjs")}();