!function(){"use strict";function t(e,r,n){function i(){n=n||e,r=r||"root";var t=new Error('Failed to require "'+n+'" from "'+r+'"');throw t.path=n,t.parent=r,t.require=!0,t}var s=t.resolve(e);if(null==s)return void i();var a=t.modules[s];if(!a._resolving&&!a.exports){var o={};o.exports={},o.client=o.component=!0,a._resolving=!0,a.call(this,o.exports,t.relative(s),o),delete a._resolving,a.exports=o.exports}return a.exports}t.modules={},t.aliases={},t.exts=["",".js",".json","/index.js","/index.json"],t.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var r=0;5>r;r++){var n=e+t.exts[r];if(t.modules.hasOwnProperty(n))return n;if(t.aliases.hasOwnProperty(n))return t.aliases[n]}},t.normalize=function(t,e){var r=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var n=0;n<e.length;++n)".."===e[n]?t.pop():"."!=e[n]&&""!=e[n]&&r.push(e[n]);return t.concat(r).join("/")},t.register=function(e,r){t.modules[e]=r},t.alias=function(e,r){function n(){throw new Error('Failed to alias "'+e+'", it does not exist')}return t.modules.hasOwnProperty(e)?void(t.aliases[r]=e):void n()},t.relative=function(e){function r(n){var i=r.resolve(n);return t(i,e,n)}var n=t.normalize(e,"..");return r.resolve=function(r){var i=r.charAt(0);if("/"===i)return r.slice(1);if("."===i)return t.normalize(n,r);for(var s=e.split("/"),a=s.length;a--&&"deps"!==s[a];);return r=s.slice(0,a+2).join("/")+"/deps/"+r},r.exists=function(e){return t.modules.hasOwnProperty(r.resolve(e))},r},t.register("terminator/src/browser.js",function(t,e){e("./common");t.dom=e("./dom.js"),t.dom=e("./dom.js")}),t.register("terminator/src/common.js",function(t,e,r){function n(t,e){var r=(this.$scope,e.name),n=e.value,i=o.decorate(r);i?i.call(this,t,n):n&&"expression"==n.type?this.watch(n,function(e){s.attr(t,r,e)}):s.attr(t,r,n)}var i=(e("./parser/Lexer.js"),e("./parser/Parser.js")),s=e("./dom.js"),a=(e("./Scope.js"),e("./util")),o=function(t,e){var r=a.typeOf(t);"object"===r&&(e=t,t=null),t&&("string"===r&&(t=new i(t).parse()),this.template=t),this.data={},a.extend(this.data,e||{}),this.$watchers=[],this.$children=[],this.context=this.context||this;var n=this.compile(this.template);if(1===n.length)this.node=n[0];else{this.node=s.fragment();for(var o=0,u=n.length;u>o;o++)this.node.appendChild(n[o])}this.digest(),this.init&&this.init.apply(this,arguments)};a.extend(o,{_decorators:{},_filters:{},_customers:{},__after__:function(t,e){var r;this.__after__=t.__after__,this._decorators=a.createObject(t._decorators),this.exprCache={},e.name&&o.register(e.name,this),(r=e.template)&&"string"==typeof r&&(this.prototype.template=new i(r).parse())},derive:a.derive,decorate:function(t,e){var r=this._decorators;return null==e?r[t]:(r[t]=e,this)},register:function(){},parse:function(t){var t=t.trim();return this.exprCache[t]||(this.exprCache[t]=new i(t).expr())}}),a.extend(o.prototype,{init:function(){},compile:function(t){if("array"===a.typeOf(t)){for(var e=[],r=0,n=t.length;n>r;r++)e.push(this.compile(t[r]));return e}return"string"==typeof t?document.createTextNode(t):u[t.type||"default"].call(this,t)},parse:function(t){return t&&"expression"===t.type?t:new i(t,{state:"JST"}).expr()},inject:function(){},set:function(t,e){if("function"==typeof t)t.call(this),this.digest();else{var r=this.data;if("undefined"!=typeof e){for(var n=t.split("."),i=0,s=n.length-1;s>i;i++)if(null==(r=r[n[i]]))return;r[n[s]]=e}else if(~t.indexOf(".")){for(var n=t.split("."),i=0,s=n.length;s>i;i++)if(null==(r=r[n[i]]))return}else r=r[t];this.digest()}},get:function(){},digest:function(){for(var t=this.$watchers,e=this.$children,r=0,n=t.length;n>r;r++){var i=t[r],s=i.get(this.data),o=!0;if(i.deep&&"object"==a.typeOf(s))if(i.last){for(var u in s)if(i.last[u]!==s[u]){o=!1;break}if(o!==!1)for(var u in i.last)if(i.last[u]!==s[u]){o=!1;break}}else o=!1;else o=a.equals(s,i.last);o===!1?(i.fn(s,i.last),i.last=a.clone(s)):"array"==a.typeOf(o)&&o.length&&(i.fn(s,o),i.last=a.clone(s))}for(var r=0,n=e.length;n>r;r++)e[r].$digest()},watch:function(t,e){"string"==typeof t&&(t=new i(t).expr(t));var r={get:t.get.bind(this.context),fn:e,pathes:t.pathes};this.$watchers.push(r)}});var u={};u.list=function(t){var e=document.createComment("termin list"),r=o.derive({template:t.body,context:this}),n=this;return this.watch(t.sequence,function(){var e={};e[t.variable]="dajsidajsidasid",e.$index=1;{var i=a.createObject(n.data,e);new r(i)}}),e},u.if=function(){},u.expression=function(t){console.log(t.get);var e=document.createTextNode();return this.watch(t,function(t){s.text(e,""+t)}),e},u.element=function(t){for(var e,r=s.create(t.tag),i=t.attrs,a=t.children,o=0,u=i.length;u>o;o++)n.call(this,r,i[o]);if(a)for(var o=0,u=a.length;u>o;o++)e=this.compile(a[o]),null!==e&&r.appendChild(e);return r};var c="click mouseover mouseout change focus blur keydown keyup keypress".split(" ");c.forEach(function(t){o.decorate("t-"+t,function(e,r){var n=this.parse(r);s.on(e,t,function(){n(this.data)})})}),o.decorate("t-model",function(t,e){var r=this.parse(e);console.log(r.get.toString())}),r.exports=o}),t.register("terminator/src/util.js",function(t,e,r){var n=r.exports,i=[].slice,s={}.toString;n.uid=function(){var t=0;return function(){return t++}}(),n.varName="data",n.randomVar=function(t){return(t||"var")+"_"+n.uid().toString(36)},n.host="data",n.slice=function(t,e,r){return i.call(t,e,r)},n.typeOf=function(t){return null==t?String(t):{}.toString.call(t).slice(8,-1).toLowerCase()},n.extend=function(t,e,r){if("array"===n.typeOf(r))for(var i=0,s=r.length;s>i;i++){var a=r[i];t[a]=e[a]}else for(var i in e)("undefined"==typeof t[i]||r===!0)&&(t[i]=e[i]);return t},n.makePredicate=function(t,e){function r(t){if(1===t.length)return n+="return str === "+t[0]+";";n+="switch(str){";for(var e=0;e<t.length;++e)n+="case '"+t[e]+"':";n+="return true}return false;"}"string"==typeof t&&(t=t.split(" "));var n="",i=[];t:for(var s=0;s<t.length;++s){for(var a=0;a<i.length;++a)if(i[a][0].length===t[s].length){i[a].push(t[s]);continue t}i.push([t[s]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),n+="var prefix = "+(e?"true":"false")+";if(prefix) str = str.replace(/^-(?:\\w+)-/,'');switch(str.length){";for(var s=0;s<i.length;++s){var o=i[s];n+="case "+o[0].length+":",r(o)}n+="}"}else r(t);return new Function("str",n)};var a=/\r\n|[\n\r\u2028\u2029]/g;n.trackErrorPos=function(t,e){a.lastIndex=0;for(var r,n,i=1,s=0,o=t.length;n=a.exec(t);)n.index<e?(++i,s=n.index+1):r=n.index;r||(r=o-1);var u=e-10;s>u&&(u=s);var c=e+10;c>r&&(c=r);var h=t.slice(u,c+1),l=i+"> "+(u>=s?"...":""),f=r>c?"...":"";return l+h+f+"\n"+new Array(l.length+e-u+1).join(" ")+"^"};var o=/\(\?\!|\(\?\:|\?\=/;n.findSubCapture=function(t){for(var e=0,r=0,n=t.length,i=t.split(o).length-1;n--;){var s=t.charAt(n);(0===n||"\\"!==t.charAt(n-1)||"?"!==t.charAt(n+1))&&("("===s&&e++,")"===s&&r++)}if(e!==r)throw"RegExp: "+t+"'s bracket is not marched";return e-i},n.escapeRegExp=function(t){return t.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(t){return"\\"+t})},n.assert=function(t,e){if(!t)throw e;return!0},n.walk=function(t){var e={};return t.walk=function(t,r){if("[object Array]"===s.call(t)){for(var n=[],i=0,a=t.length;a>i;i++)n.push(this.walk(t[i]));return n}return e[t.type||"default"].call(this,t,r)},e},n.isEmpty=function(t){return!t||0===t.length},n.compileGetter=function(t){for(var e="obj",r="if("+e+" != null",n=0,i=t.length;i>n;n++)e+="['"+t[n]+"']",r+="&&"+e+"!=null";return r+=") return "+e+";\n",r+="else return undefined",new Function("obj",r)},n.createObject=function(t,e){function r(){}r.prototype=t;var i=new r;return e&&n.extend(i,e),i},n.createProto=function(t,e){function r(){this.constructor=t}return r.prototype=e,t.prototype=new r},n.derive=function(){function t(t,e,r){return function(){var n=this.supr;this.supr=r[t];var i=e.apply(this,arguments);return this.supr=n,i}}function e(e,n,s){for(var a in n)n.hasOwnProperty(a)&&(e[a]=i(n[a])&&i(s[a])&&r.test(n[a])?t(a,n[a],s):n[a])}var r=/xy/.test(function(){})?/\bsupr\b/:/.*/,i=function(t){return"function"==typeof t};return function(t){function r(){s.apply(this,arguments)}var i,s=this,a=s.prototype;return i=n.createProto(r,a),(r.methods=function(t){e(i,t,a)})(t),s.__after__&&s.__after__.call(r,s,t),r.derive=s.derive,r}}(),n.clone=function(t){var e=n.typeOf(t);if("array"==e){for(var r=[],i=0,s=t.length;s>i;i++)r[i]=t[i];return r}if("object"==e){var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=t[i]);return r}return t},n.equals=function(t,e){if("array"==n.typeOf(t)){var r=u(t,e||[]);return r}return t===e};var u=function(){function t(t,e){return t===e}function e(e,r){for(var n=e.length,i=r.length,s=[],a=0;n>=a;a++)s.push([a]);for(var o=1;i>=o;o++)s[0][o]=o;for(var a=1;n>=a;a++)for(var o=1;i>=o;o++)s[a][o]=t(e[a-1],r[o-1])?s[a-1][o-1]:Math.min(s[a-1][o]+1,s[a][o-1]+1);return s}function r(t,r){for(var n=e(r,t),i=r.length,s=i,a=t.length,o=a,u=[],c=n[s][o];s>0||o>0;)if(0!=s)if(0!=o){var h=n[s-1][o-1],l=n[s-1][o],f=n[s][o-1],p=Math.min(f,l,h);p==h?(h==c?u.unshift(0):(u.unshift(1),c=h),s--,o--):p==l?(u.unshift(2),s--,c=l):(u.unshift(3),o--,c=f)}else u.unshift(2),s--;else u.unshift(3),o--;var v=0,d=3,m=2,T=1,i=0;a=0;for(var E=[],g={index:null,add:0,removed:[]},s=0;s<u.length;s++)switch(u[s]>0?null==g.index&&(g.index=a):null!=g.index&&(E.push(g),g={index:null,add:0,removed:[]}),u[s]){case v:i++,a++;break;case d:g.add++,a++;break;case m:g.removed.push(r[i]),i++;break;case T:g.add++,g.removed.push(r[i]),i++,a++}return null!=g.index&&E.push(g),E}return r}()}),t.register("terminator/src/env.js",function(t){t.svg=function(){return"undefined"!=typeof document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),t.transition=function(){}}),t.register("terminator/src/dom.js",function(t,e,r){var n=r.exports,i=(e("./env.js"),e("./util")),s=document.createElement("div");n.tNode=s,n.msie=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1]),isNaN(n.msie)&&(n.msie=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])),n.create=function(t,e){return document[e?i.assert("svg"!==e||evn.svg,"this browser has no svg support")&&"createElementNS":"createElement"](t,e)},n.fragment=function(){return document.createDocumentFragment()},n.append=function(t,e){if("array"===i.typeOf(e))for(var r=0,s=e.length;s>r;r++)n.append(t,e[r]);else e&&t.appendChild(e)},n.attr=function(t,e,r){return void 0===r?t.getAttribute(e,r):null===r?t.removeAttribute(e):t.setAttribute(e,r)},n.on=function(t,e,r,n){t.addEventListener?t.addEventListener(e,r,!!n):t.attachEvent("on"+e,r)},n.off=function(t,e,r,n){t.removeEventListener?t.removeEventListener(e,r,!!n):t.detachEvent("on"+e,r)},n.text=function(){var t={};return n.msie&&n.msie<9?(t[1]="innerText",t[3]="nodeValue"):t[1]=t[3]="textContent",function(e,r){var n=t[e.nodeType];return null==r?n?e[n]:"":void(e[n]=r)}}();n.html=function(){return void 0===text?node.innerHTML:void(node.innerHTML=text)},n.css=function(){},n.addClass=function(){},n.delClass=function(){},n.hasClass=function(){}}),t.register("terminator/src/Scope.js",function(t,e,r){function n(t){this.$id=i.uid("scope"),this.$watchers=[],this.$children=[],this.$context=t}var i=e("./util.js"),s=e("./parser/Parser.js");i.extend(n.prototype,{$watch:function(t,e){"string"==typeof t&&(t=new s(t).expr(t));var r={get:t.body.bind(this.$context),fn:e,pathes:t.pathes};this.$watchers.push(r)},$set:function(t,e){"function"==typeof t?(t.call(this),this.$digest()):(this.$pathValue(t,e),this.$digest())},$get:function(t){"array"!==i.typeOf(t)&&(t=t.split("."));for(var e=this[t[0]],r=r,n=t.length;n>r;r++){if(!e)return e;e=e[t[r]]}return e},$digest:function(){for(var t=this.$watchers,e=this.$children,r=0,n=t.length;n>r;r++){var s=t[r],a=s.get(this),o=!0;if(s.deep&&"object"==i.typeOf(a))if(s.last){for(var u in a)if(s.last[u]!==a[u]){o=!1;break}if(o!==!1)for(var u in s.last)if(s.last[u]!==a[u]){o=!1;break}}else o=!1;else o=i.equals(a,s.last);o===!1?(s.fn(a,s.last),s.last=i.clone(a)):"array"==i.typeOf(o)&&o.length&&(s.fn(a,o),s.last=i.clone(a))}for(var r=0,n=e.length;n>r;r++)e[r].$digest()},$destroy:function(){var t=this.$parent;if(t){var e=t.$chidren,r=e.indexOf(this);~r&&e.splice(r,1)}this.$chidren=null,this.$context=null,this.$watcher=null,this.$parent=null},$new:function(){var t=i.create(this);return t.$root=this.$root,t.$id=i.uid("scope"),t.$parent=this,this.$children.push(t),t.$watcher=[],t.$children=[],t.$context=this.$context,t},$pathValue:function(t,e){var r=this;if("undefined"!=typeof e){for(var n=t.split("."),i=0,s=n.length-1;s>i;i++)if(null==(r=r[n[i]]))return;return void(r[n[s]]=e)}if(~t.indexOf(".")){for(var n=t.split("."),i=0,s=n.length;s>i;i++)if(null==(r=r[n[i]]))return}else r=r[t];return"function"==typeof r?r():r}}),r.exports=n}),t.register("terminator/src/parser/Lexer.js",function(t,e,r){function n(t){return function(e){return{type:t,value:e}}}function i(t,e){return function(){return{type:t,value:arguments[e]}}}function s(t,e){this.input=(t||"").trim(),this.opts=e||{},this.map=2!=this.opts.mode?f:p,this.states=["INIT"],e.state&&this.states.push(e.state)}function a(t){for(var e,r,n={},i=0,s=t.length;s>i;i++)e=t[i],r=e[2]||"INIT",(n[r]||(n[r]={rules:[],links:[]})).rules.push(e);return o(n)}function o(t){var e,r,s,a,o,c;for(var l in t){e=t[l],e.curIndex=1,r=e.rules,s=[];for(var l=0,f=r.length;f>l;l++){if(rule=r[l],o=rule[0],a=rule[1],"string"==typeof a)if(~a.indexOf(":")){var p=a.split(":"),v=p[0],d=parseInt(p[1].replace("$",""));a=i(v,d)}else a=n(a);"regexp"==u.typeOf(o)&&(o=o.toString().slice(1,-1)),o=o.replace(/\{(\w+)\}/g,function(t,e){return"string"==typeof h[e]?u.escapeRegExp(h[e]):String(h[e]).slice(1,-1)}),c=u.findSubCapture(o)+1,e.links.push([e.curIndex,c,a]),e.curIndex+=c,s.push(o)}e.TRUNK=new RegExp("^(?:("+s.join(")|(")+"))")}return t}var u=e("../util.js"),c=s.prototype;c.skipspace=function(t){var e,r=0,n=t;for(e=n.charCodeAt(r);e&&(32===e||13===e||10===e||8232===e||8233===e);)r++,e=n.charCodeAt(r);return this.index+=r,t.slice(r)},c.lex=function(t){t=(t||this.input).trim();{var e,r,n,i,s,a=[];this.input=t}for(this.index=0;t;)s=this.state(),e=this.map[s],r=e.TRUNK.exec(t),r||(console.log(a),this.error("Unrecoginized Token")),n=r[0].length,i=this._process.call(this,r,e),i&&a.push(i),this.index+=n,t=t.slice(n);return a.push({type:"EOF"}),a},c.next=function(){var t=this.map[this.state()],e=t.TRUNK.exec(str);e||this.error("Unrecoginized Token");var r=e[0].length,n=this._process.apply(this,e);return this.input=this.input.slice(r),n},c.error=function(t){throw"Parse Error: "+t+":\n"+u.trackErrorPos(this.input,this.index)},c._process=function(t,e){for(var r=e.links,n=r.length,i=0;n>i;i++){var s=r[i],a=s[2],o=s[0];if(void 0!=t[o]){if(a){var u=a.apply(this,t.slice(o,o+s[1]));u&&(u.pos=this.index)}break}}return u},c.enter=function(t){return this.states.push(t),this},c.state=function(){var t=this.states;return t[t.length-1]},c.leave=function(t){var e=this.states;t&&e[e.length-1]!==t||e.pop()};var h={BEGIN:"{{",END:"}}",NAME:/(?:[:_A-Za-z][-\.:_0-9A-Za-z]*)/,IDENT:/[\$_A-Za-z][-_0-9A-Za-z\$]*/,SPACE:/[\r\n\f ]/},l={COMMENT:[/<!--([^\x00]*?)-->/],ENTER_JST:[/[^\x00\<]*?(?={BEGIN})/,function(t){return this.enter("JST"),t?{type:"TEXT",value:t}:void 0}],ENTER_JST2:[/[^\x00]*?(?={BEGIN})/,function(t){return this.enter("JST"),t?{type:"TEXT",value:t}:void 0}],ENTER_TAG:[/[^\x00<>]*?(?=<)/,function(t){return this.enter("TAG"),t?{type:"TEXT",value:t}:void 0}],TEXT:[/[^\x00]+/,"TEXT"],TAG_NAME:[/{NAME}/,"NAME","TAG"],TAG_OPEN:[/<({NAME})\s*/,function(t,e){return{type:"TAG_OPEN",value:e}},"TAG"],TAG_CLOSE:[/<\/({NAME})[\r\n\f ]*>/,function(t,e){return this.leave(),{type:"TAG_CLOSE",value:e}},"TAG"],TAG_ENTER_JST:[/(?={BEGIN})/,function(){this.enter("JST")},"TAG"],TAG_PUNCHOR:[/[>\/=]/,function(t){return">"===t&&this.leave(),{type:t,value:t}},"TAG"],TAG_STRING:[/'([^']*)'|"([^"]*)"/,function(t,e,r){return{type:"STRING",value:e||r}},"TAG"],TAG_SPACE:[/{SPACE}+/,null,"TAG"],JST_COMMENT:[/{!([^\x00]*?)!}/,null,"JST"],JST_OPEN:["{BEGIN}#{SPACE}*({IDENT})",function(t,e){return{type:"OPEN",value:e}},"JST"],JST_PART_OPEN:["{BEGIN}>{SPACE}*({IDENT})",function(t,e){return{type:"PART_OPEN",value:e}},"JST"],JST_LEAVE:[/{END}/,function(){return this.leave("JST"),{type:"END"}},"JST"],JST_CLOSE:[/{BEGIN}\s*\/\s*({IDENT})\s*{END}/,function(t,e){return this.leave("JST"),{type:"CLOSE",value:e}},"JST"],JST_EXPR_OPEN:["{BEGIN}",function(t,e){var r="="==e;return{type:"EXPR_OPEN",escape:r}},"JST"],JST_IDENT:["{IDENT}","IDENT","JST"],JST_SPACE:[/[ \r\n\f]+/,null,"JST"],JST_PUNCHOR:[/[=!]?==|[-=><+*\/%]?\=|\|\||&&|[\<\>\[\]\(\)\-\|\{}\+\*\/%?:\.!,#]/,function(t){return{type:t,value:t}},"JST"],JST_STRING:[/'([^']*)'|"([^"]*)"/,function(t,e,r){return{type:"STRING",value:e||r}},"JST"],JST_NUMBER:[/-?(?:[0-9]*\.[0-9]+|[0-9]+)/,function(t){return{type:"NUMBER",value:parseFloat(t,10)}},"JST"]},f=a([l.COMMENT,l.ENTER_JST,l.ENTER_TAG,l.TEXT,l.TAG_NAME,l.TAG_OPEN,l.TAG_CLOSE,l.TAG_PUNCHOR,l.TAG_ENTER_JST,l.TAG_STRING,l.TAG_SPACE,l.JST_OPEN,l.JST_PART_OPEN,l.JST_CLOSE,l.JST_EXPR_OPEN,l.JST_IDENT,l.JST_SPACE,l.JST_LEAVE,l.JST_NUMBER,l.JST_PUNCHOR,l.JST_STRING,l.JST_COMMENT]),p=a([l.ENTER_JST2,l.TEXT,l.JST_OPEN,l.JST_PART_OPEN,l.JST_CLOSE,l.JST_EXPR_OPEN,l.JST_IDENT,l.JST_SPACE,l.JST_LEAVE,l.JST_NUMBER,l.JST_PUNCHOR,l.JST_STRING,l.JST_COMMENT]);r.exports=s}),t.register("terminator/src/parser/node.js",function(t,e,r){r.exports={element:function(t,e,r){return{type:"element",tag:t,attrs:e,children:r}},attribute:function(t,e){return{type:"attribute",name:t,value:e}},"if":function(t,e,r){return{type:"if",test:t,consequent:e,alternate:r}},list:function(t,e,r){return{type:"list",sequence:t,variable:e,body:r}},expression:function(t,e,r){return{type:"expression",get:t,set:e,depend:r}},text:function(t){return t},interplation:function(t){return{type:"interplation",expression:t}},filter:function(t,e){return{type:"filter",object:t,filters:e}},condition:function(t,e,r){return{type:"condition",test:t,consequent:e,alternate:r}},logic:function(t,e,r){return{type:"logic",op:t,left:e,right:r}},binary:function(t,e,r){return{type:"binary",op:t,left:e,right:r}},unary:function(t,e){return{type:"logic",op:t,arg:e}},call:function(t,e){return{type:"call",callee:t,args:e}},member:function(t,e,r){return{type:"member",obj:t,prop:e,isComputed:r}}}}),t.register("terminator/src/parser/Parser.js",function(t,e,r){function n(t,e){e=e||{},this.input=t,this.tokens=new a(t,e).lex(),this.pos=0,this.length=this.tokens.length}var i=e("../util.js"),s=e("./node.js"),a=e("./Lexer.js"),o=i.varName,u=i.makePredicate("STRING IDENT NUMBER"),c=i.makePredicate("true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt"),h=n.prototype;h.parse=function(){return this.pos=0,this.program()},h.ll=function(t){t=t||1,0>t&&(t+=1);var e=this.pos+t-1;return e>this.length-1?this.tokens[this.length-1]:this.tokens[e]},h.la=function(t){return(this.ll(t)||"").type},h.match=function(t,e){if(r=this.eat(t,e))return r;var r=this.ll();this.error("expect ["+t+(null==e?"":":"+e)+']" -> got "['+r.type+(null==e?"":":"+r.value)+"]",r.pos)},h.error=function(t,e){throw"Parse Error: "+t+":\n"+i.trackErrorPos(this.input,null!=e?e:this.ll().pos)},h.next=function(t){t=t||1,this.pos+=t},h.eat=function(t,e){var r=this.ll();if("string"!=typeof t){for(var n=t.length;n--;)if(r.type==t[n])return this.next(),r}else if(r.type==t&&("undefined"==typeof e||r.value==e))return this.next(),r;return!1},h.isEmpty=function(t){return!t||t.length},h.program=function(){for(var t=[],e=this.ll();"EOF"!==e.type&&"TAG_CLOSE"!==e.type;)t.push(this.statement()),e=this.ll();return t},h.statements=function(t){for(var e,r=[];!(e=this.eat("CLOSE",t));)r.push(this.statement());return r},h.statement=function(){var t=this.ll();switch(t.type){case"NAME":case"TEXT":var e=t.value;for(this.next();t=this.eat(["NAME","TEXT"]);)e+=t.value;return e;case"TAG_OPEN":return this.xml();case"OPEN":return this.directive();case"EXPR_OPEN":return this.interplation();default:this.error("Unexpected token: "+this.la())}},h.xml=function(){var t,e,r,n;return t=this.match("TAG_OPEN").value,e=this.attrs(),n=this.eat("/"),this.match(">"),n||(r=this.program(),this.eat("TAG_CLOSE",t)||this.error("expect </"+t+"> gotno matched closeTag")),s.element(t,e,r)},h.attrs=function(){for(var t,e,r=[];e=this.eat("NAME");)t={name:e.value},this.eat("=")&&(t.value=this.attvalue()),r.push(t);return r},h.attvalue=function(){var t=this.ll();switch(t.type){case"NAME":case"STRING":return this.next(),t.value;case"EXPR_OPEN":return this.interplation();default:this.error("Unexpected token: "+this.la())}return t.value},h.directive=function(t){return t=t||this.ll().value,"function"==typeof this[t]?this[t]():void this.error("Undefined directive["+t+"]")},h.interplation=function(){var t=(this.match("EXPR_OPEN").nowatch,this.expr(!0));return this.match("END"),t},h.if=function(){this.next();var t=this.expr(),e=[],r=[],n=e;this.match("END");for(var i,a;!(a=this.eat("CLOSE"));)if(i=this.ll(),"OPEN"==i.type)switch(i.value){case"else":n=r,this.next(),this.match("END");break;case"elseif":return r.push(this.if()),s.if(t,e,r);default:n.push(this.statement())}else n.push(this.statement());return"if"!==a.value&&this.error("Unmatched if directive"),s.if(t,e,r)},h.list=function(){this.next();var t,e,r=this.expr(),n=[],i=[],a=n;for(this.match("IDENT","as"),t=this.match("IDENT").value,this.match("END");!(e=this.eat("CLOSE"));)this.eat("OPEN","else")?(a=i,this.match("END")):a.push(this.statement());return"list"!==e.value&&this.error("expect {/list} got {/"+e.value+"}",e.pos),s.list(r,t,n,i)},h.expr=function(t){this.depend=[];var e;e=t?this.filter():this.condition();var r=new Function(i.varName,"return ("+e+")");return this.depend.length?s.expression(r,null,this.depend):r()},h.filter=function(t){var e,r,n=this.condition(t),s=this.eat("|");if(s){e=[";(function(data){","var ",r=i.attrName(),"=",this.condition(t),";"];do e.push(r+" = this.f["+this.match("IDENT").value+"]("+r),e.push(this.eat(":")?", "+this.arguments(t,"|").join(",")+");":");");while(s=this.eat("|"));return e.push("return "+r+"}"),e.join("")}return n},h.condition=function(){var t=this.or();return this.eat("?")?[t+"?",this.condition(),this.match(":").type,this.condition()].join(""):t},h.or=function(){var t=this.and();return this.eat("||")?t+"||"+this.or():t},h.and=function(){var t=this.equal();return this.eat("&&")?t+"&&"+this.and():t},h.equal=function(){var t,e=this.relation();return(t=this.eat(["==","!=","===","!=="]))?e+t.type+this.equal():e},h.relation=function(){var t,e=this.additive();return(t=this.eat(["<",">",">=","<="])||this.eat("IDENT","in"))?e+t.value+this.relation():e},h.additive=function(){var t,e=this.multive();return(t=this.eat(["+","-"]))?e+t.value+this.additive():e},h.multive=function(){var t,e=this.unary();return(t=this.eat(["*","/","%"]))?e+t.type+this.multive():e},h.unary=function(){var t;return(t=this.eat(["+","-","~","!"]))?"("+t.type+this.unary()+")":this.member()},h.member=function(t,e){var r,n,i;if(t||(n=this.primary(),"IDENT"===n.type?c(n.value)?t=n.value:(e=[],e.push(n.value),t=o+"['"+n.value+"']"):t="STRING"===n.type?"'"+n.value+"'":n.value),r=this.eat(["[",".","("]))switch(r.type){case".":return t+="['"+(i=this.match("IDENT").value)+"']",e&&e.push(i),this.member(t,e);case"[":return n=this.expr(),t+="['"+n+"']",e&&n.type&&u(n.type)?e.push(n.value):(this.depend.push(e),e=!1),this.match("]"),this.member(t,e);case"(":return t+="("+this.arguments().join(",")+")",this.match(")"),this.depend.push(e),this.member(t)}return e&&this.depend.push(e),t},h.arguments=function(t){t=t||")";var e=[];do this.la()!==t&&e.push(this.condition());while(this.eat(","));return e},h.primary=function(){var t=this.ll();switch(t.type){case"{":return this.object();case"[":return this.array();case"(":return this.paren();case"IDENT":case"STRING":case"NUMBER":return this.next(),t;default:this.error("Unexpected Token: "+t.type)}},h.object=function(){for(var t,e=[this.match("{").type];;){if(t=this.eat(["STRING","IDENT","NUMBER"]),!t){e.push(this.match("}").type);break}e.push(t.value+this.match(":").type),e.push(this.condition()),this.eat(",")&&e.push(",")}return e.join("")},h.array=function(){for(var t=[this.match("[").type];item=this.condition();)t.push(item),this.eat(",")&&this.push(",");return t.push(this.match("]").type),t.join("")},h.paren=function(){return this.match("(").type+this.expr()+this.match(")").type},r.exports=n}),t.register("terminator/src/compiler/Compiler1.js",function(t,e,r){function n(t){"string"==typeof t&&(t=new s(t).parse()),this.ast=t}var i=e("../util.js"),s=(e("../dom"),e("../parser/Parser.js")),a=n.prototype;a.compile=function(){};var o=i.walk(a);o.default=function(){},o.interplation=function(){},o.expression=function(){},r.exports=n}),t.register("terminator/src/compiler/Compiler2.js",function(t,e,r){function n(t){this.ast=new s(t,{mode:2}).parse()}var i=e("../util.js"),s=e("../parser/Parser.js"),a=n.prototype;a.compile=function(){},a.walk=i.walk,r.exports=n}),t.alias("terminator/src/browser.js","terminator/index.js"),"object"==typeof exports?module.exports=t("terminator"):"function"==typeof define&&define.amd?define(function(){return t("terminator")}):window.terminator=t("terminator")}();