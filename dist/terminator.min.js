!function(){"use strict";function t(e,n,r){function i(){r=r||e,n=n||"root";var t=new Error('Failed to require "'+r+'" from "'+n+'"');throw t.path=r,t.parent=n,t.require=!0,t}var s=t.resolve(e);if(null==s)return void i();var a=t.modules[s];if(!a._resolving&&!a.exports){var o={};o.exports={},o.client=o.component=!0,a._resolving=!0,a.call(this,o.exports,t.relative(s),o),delete a._resolving,a.exports=o.exports}return a.exports}t.modules={},t.aliases={},t.exts=["",".js",".json","/index.js","/index.json"],t.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var n=0;5>n;n++){var r=e+t.exts[n];if(t.modules.hasOwnProperty(r))return r;if(t.aliases.hasOwnProperty(r))return t.aliases[r]}},t.normalize=function(t,e){var n=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var r=0;r<e.length;++r)".."===e[r]?t.pop():"."!=e[r]&&""!=e[r]&&n.push(e[r]);return t.concat(n).join("/")},t.register=function(e,n){t.modules[e]=n},t.alias=function(e,n){function r(){throw new Error('Failed to alias "'+e+'", it does not exist')}return t.modules.hasOwnProperty(e)?void(t.aliases[n]=e):void r()},t.relative=function(e){function n(r){var i=n.resolve(r);return t(i,e,r)}var r=t.normalize(e,"..");return n.resolve=function(n){var i=n.charAt(0);if("/"===i)return n.slice(1);if("."===i)return t.normalize(r,n);for(var s=e.split("/"),a=s.length;a--&&"deps"!==s[a];);return n=s.slice(0,a+2).join("/")+"/deps/"+n},n.exists=function(e){return t.modules.hasOwnProperty(n.resolve(e))},n},t.register("terminator/src/common.js",function(t,n,r){function i(t,e){var n=e.name,r=e.value||"",i=f.decorate(n);i?i.call(this,t,r):"expression"==r.type?this.$watch(r,function(e){u.attr(t,n,e)}):u.attr(t,n,r)}function s(t,n,r,i){function s(){i.assign(this.value)(t),t.$phase||t.$digest()}null==i(t)&&i.assign(n.value)(t),t.$watch(i,function(t){var r=e._$all("option",n);r.forEach(function(e,r){e.value==t&&(n.selectedIndex=r)})}),v._$addEvent(n,"change",s)}function a(t,e){var n=!1,r=this;this.$watch(e,function(e){n||(t.value=null==e?"":""+e)});var i=c.throttle(function(){var t=this.value;e.set(r,t),n=!0,r.$digest(),n=!1});9!==u.msie&&"oninput"in u.tNode?t.addEventListener("input",i):(u.on(t,"paste",i),u.on(t,"keyup",i),u.on(t,"cut",i))}var o=(n("./parser/Lexer.js"),n("./parser/Parser.js")),u=(n("./parser/node.js"),n("./dom.js")),h=(n("./Scope.js"),n("./group.js")),c=n("./util"),l=n("./helper/event.js"),f=function(t,e){var n=c.typeOf(t);"object"===n&&(e=t,t=null),t&&("string"===n&&(t=f.getTemplate(t),t=new o(t).parse()),this.template=t),this.data={},c.extend(this.data,e||{}),this.$watchers=[],this.$children=[],this.context=this.context||this,this.group=this.$compile(this.template),this.node=this.group.generate(),this.$digest(),this.init&&this.init.apply(this,arguments)};c.extend(f,{_decorators:{},_components:{},_filters:{},_customers:{},_exprCache:{},__after__:function(t,e){var n;this.__after__=t.__after__,this._decorators=c.createObject(t._decorators),e.name&&f.component(e.name,this),(n=e.template)&&(n=f.getTemplate(n),"string"==typeof n&&(this.prototype.template=new o(n).parse()))},getTemplate:function(t){return/^\w{1,20}$/.test(t)?document.getElementById(t).innerHTML:t},derive:c.derive,decorate:function(t,e){var n=this._decorators;return null==e?n[t]:(n[t]=e,this)},component:function(t,e){return e?(this._components[t]=e,this):this._components[t]},parse:function(t){if("expression"===t.type)return t;var t=t.trim(),e=this._exprCache[t]||(this._exprCache[t]=new o(t,{state:"JST"}).expression());return e}}),l.mixTo(f),c.extend(f.prototype,{init:function(){},$compile:function(t){if("array"===c.typeOf(t)){for(var e=[],n=0,r=t.length;r>n;n++)e.push(this.$compile(t[n]));return new h(e)}return"string"==typeof t?document.createTextNode(t):p[t.type||"default"].call(this,t)},$inject:function(t,e){e=e||"bottom"},generate:function(){return this.node||this.group.generate()},$apply:function(){},set:function(t,e){if("function"==typeof t)t.call(this,this.data);else{var t=(this.data,f.parse(t));t.set(this,e)}this.$digest(t)},_path:c._path,$digest:function(){{var t=this.$watchers;this.$children}if("digest"!==this.$phase){this.$phase="digest";var e=!1;this.$trigger("digest");for(var n=0,r=t.length;r>n;n++){var i=t[n],s=i.get(this),a=!0;if(i.deep&&"object"==c.typeOf(s))if(i.last){for(var o in s)if(i.last[o]!==s[o]){a=!1;break}if(a!==!1)for(var o in i.last)if(i.last[o]!==s[o]){a=!1;break}}else a=!1;else a=c.equals(s,i.last);a===!1?(i.fn(s,i.last),i.last=c.clone(s)):"array"==c.typeOf(a)&&a.length?(i.fn(s,a),i.last=c.clone(s)):a=!0,a!==!0&&(e=!0)}this.$phase=null,e&&this.$digest()}},destroy:function(){this.group.destroy(),this.$watchers=null,this.template=null},$watch:function(t,e){var n=c.uid("w_"),t=f.parse(t),r={get:t.get,fn:e,pathes:t.pathes,id:n};return this.$watchers.push(r),n},$unwatch:function(t){var e=this.$watchers;if(t&&e)for(var n=e.length;n--;)if(e[n]&&e[n].id===t)return e.splice(n,1)},inject:function(t,e){e=e||"bottom";var n,r;switch(e){case"bottom":t.appendChild(this.node);break;case"top":(n=t.firstChild)?t.insertBefore(this.node,t.firstChild):t.appendChild(this.node);break;case"after":(r=t.nextSibling)?r.parentNode.insertBefore(this.node,r):r.parentNode.appendChild(this.node);break;case"before":t.parentNode.insertBefore(this.node,t)}}});var p={};p.list=function(t){var e=document.createComment("termin list"),n=f.derive({template:t.body,context:this}),r=new h;return this.$watch(t.sequence,function(i,s){if(s&&s.length){for(var a=0,o=i.length,u=(s[0].index,0);u<s.length;u++){for(var h=s[u],l=h.index,f=a;l>f;f++){var p=r.get(f);p.set("$index",f)}for(var d=0,v=h.removed.length;v>d;d++){var g=r.children.splice(l,1)[0];g.destroy()}for(var m=l;m<l+h.add;m++){var T=c.createObject(i[m]),y={};y.$index=m,y[t.variable]=T;var E=new n(y);window.section=E;var x=r.get(m-1)?r.get(m-1).group.get(-1):e;e.parentNode.insertBefore(E.node,x.nextSibling),r.children.splice(m,0,E)}a=l+h.add-h.removed.length,a=0>a?0:a}if(o>a)for(var u=a;o>u;u++){var N=r.get(u);N.set("$index",u)}}}),this.$on("digest",function(){r.children.forEach(function(t){t.$digest()})}),{generate:function(){return e},destroy:function(){r.destroy()}}},p.partial=function(t){var e,n=t.content;return n&&(e=this.$compile(new o(n.get(this)).parse())),{generate:function(){return e.generate()},destroy:function(){e.destroy()}}},p.if=function(t){var e,n,r,i=document.createComment("termin list"),s=this;return this.$watch(t.test,function(a){a?(e=s.$compile(t.consequent),r=e.generate(),n&&n.destroy(),i.parentNode&&i.parentNode.insertBefore(r,i)):(e&&e.destroy(),t.alternate&&(n=s.$compile(t.alternate)),r=n.generate(),i.parentNode&&i.parentNode.insertBefore(r,i)),s.$digest()}),{generate:function(){return i},destroy:function(){n&&n.destroy(),e&&e.destroy()}}},p.expression=function(t){{var e=document.createTextNode("");this.$watch(t,function(t){u.text(e,""+(t||""))})}return{generate:function(){return e},destroy:function(){}}},p.element=function(t){var e=t.attrs,n=f.component(t.tag);if(n){for(var r=new n({}),s=0,a=e.length;a>s;s++){var o=e[s],c=o.value||"";"expression"===c.type?this.$watch(c,function(t){r.set(o.name,t)}):r.set(o.name,c)}return r}for(var l,p=u.create(t.tag),d=t.children,v=new h,s=0,a=e.length;a>s;s++)i.call(this,p,e[s]);if(d)for(var v=v,s=0,a=d.length;a>s;s++)l=this.$compile(d[s]),null!==l&&v.push(l);return{generate:function(){return v&&p.appendChild(v.generate()),p},destroy:function(){v&&v.destroy(),u.remove(p)}}},p.string=function(){};var d="click mouseover mouseout change focus blur keydown keyup keypress".split(" ");d.forEach(function(t){f.decorate("t-"+t,function(e,n){if(n){var r=this;u.on(e,t,function(){n.get(r),r.$digest()})}})}),f.decorate("t-model",function(t,e){var n=t.tagName.toLowerCase();switch("string"==typeof e&&(e=f.parse(e)),n){case"select":s.call(this,t,e);break;default:a.call(this,t,e)}}).decorate("proxy",function(){});f.derive({});r.exports=f}),t.register("terminator/src/util.js",function(t,e,n){var r=n.exports,i=[].slice,s={}.toString;r.uid=function(){var t=0;return function(){return t++}}(),r.varName="d_"+r.uid(),r.setName="p_"+r.uid(),r.randomVar=function(t){return(t||"var")+"_"+r.uid().toString(36)},r.host="data",r.slice=function(t,e,n){return i.call(t,e,n)},r.typeOf=function(t){return null==t?String(t):{}.toString.call(t).slice(8,-1).toLowerCase()},r.extend=function(t,e,n){if("array"===r.typeOf(n))for(var i=0,s=n.length;s>i;i++){var a=n[i];t[a]=e[a]}else for(var i in e)("undefined"==typeof t[i]||n===!0)&&(t[i]=e[i]);return t},r.makePredicate=function(t,e){function n(t){if(1===t.length)return r+="return str === "+t[0]+";";r+="switch(str){";for(var e=0;e<t.length;++e)r+="case '"+t[e]+"':";r+="return true}return false;"}"string"==typeof t&&(t=t.split(" "));var r="",i=[];t:for(var s=0;s<t.length;++s){for(var a=0;a<i.length;++a)if(i[a][0].length===t[s].length){i[a].push(t[s]);continue t}i.push([t[s]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),r+="var prefix = "+(e?"true":"false")+";if(prefix) str = str.replace(/^-(?:\\w+)-/,'');switch(str.length){";for(var s=0;s<i.length;++s){var o=i[s];r+="case "+o[0].length+":",n(o)}r+="}"}else n(t);return new Function("str",r)};var a=/\r\n|[\n\r\u2028\u2029]/g;r.trackErrorPos=function(t,e){a.lastIndex=0;for(var n,r,i=1,s=0,o=t.length;r=a.exec(t);)r.index<e?(++i,s=r.index+1):n=r.index;n||(n=o-1);var u=e-10;s>u&&(u=s);var h=e+10;h>n&&(h=n);var c=t.slice(u,h+1),l=i+"> "+(u>=s?"...":""),f=n>h?"...":"";return l+c+f+"\n"+new Array(l.length+e-u+1).join(" ")+"^"};var o=/\(\?\!|\(\?\:|\?\=/;r.findSubCapture=function(t){for(var e=0,n=0,r=t.length,i=t.split(o).length-1;r--;){var s=t.charAt(r);(0===r||"\\"!==t.charAt(r-1)||"?"!==t.charAt(r+1))&&("("===s&&e++,")"===s&&n++)}if(e!==n)throw"RegExp: "+t+"'s bracket is not marched";return e-i},r.escapeRegExp=function(t){return t.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(t){return"\\"+t})},r.assert=function(t,e){if(!t)throw e;return!0},r.walk=function(t){var e={};return t.walk=function(t,n){if("[object Array]"===s.call(t)){for(var r=[],i=0,a=t.length;a>i;i++)r.push(this.walk(t[i]));return r}return e[t.type||"default"].call(this,t,n)},e},r.isEmpty=function(t){return!t||0===t.length},r.compileGetter=function(t){for(var e="obj",n="if("+e+" != null",r=0,i=t.length;i>r;r++)e+="['"+t[r]+"']",n+="&&"+e+"!=null";return n+=") return "+e+";\n",n+="else return undefined",new Function("obj",n)},r.createObject=function(t,e){function n(){}n.prototype=t;var i=new n;return e&&r.extend(i,e),i},r.createProto=function(t,e){function n(){this.constructor=t}return n.prototype=e,t.prototype=new n},r.derive=function(){function t(t,e,n){return function(){var r=this.supr;this.supr=n[t];var i=e.apply(this,arguments);return this.supr=r,i}}function e(e,r,s){for(var a in r)r.hasOwnProperty(a)&&(e[a]=i(r[a])&&i(s[a])&&n.test(r[a])?t(a,r[a],s):r[a])}var n=/xy/.test(function(){})?/\bsupr\b/:/.*/,i=function(t){return"function"==typeof t};return function(t){function n(){s.apply(this,arguments)}var i,s=this,a=s.prototype;return i=r.createProto(n,a),(n.methods=function(t){e(i,t,a)})(t),s.__after__&&s.__after__.call(n,s,t),n.derive=s.derive,n}}(),r.clone=function(t){var e=r.typeOf(t);if("array"==e){for(var n=[],i=0,s=t.length;s>i;i++)n[i]=t[i];return n}if("object"==e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}return t},r.equals=function(t,e){if("array"==r.typeOf(t)){var n=u(t,e||[]);return n}return t===e};var u=function(){function t(t,e){return t===e}function e(e,n){for(var r=e.length,i=n.length,s=[],a=0;r>=a;a++)s.push([a]);for(var o=1;i>=o;o++)s[0][o]=o;for(var a=1;r>=a;a++)for(var o=1;i>=o;o++)s[a][o]=t(e[a-1],n[o-1])?s[a-1][o-1]:Math.min(s[a-1][o]+1,s[a][o-1]+1);return s}function n(t,n){for(var r=e(n,t),i=n.length,s=i,a=t.length,o=a,u=[],h=r[s][o];s>0||o>0;)if(0!=s)if(0!=o){var c=r[s-1][o-1],l=r[s-1][o],f=r[s][o-1],p=Math.min(f,l,c);p==c?(c==h?u.unshift(0):(u.unshift(1),h=c),s--,o--):p==l?(u.unshift(2),s--,h=l):(u.unshift(3),o--,h=f)}else u.unshift(2),s--;else u.unshift(3),o--;var d=0,v=3,g=2,m=1,i=0;a=0;for(var T=[],y={index:null,add:0,removed:[]},s=0;s<u.length;s++)switch(u[s]>0?null==y.index&&(y.index=a):null!=y.index&&(T.push(y),y={index:null,add:0,removed:[]}),u[s]){case d:i++,a++;break;case v:y.add++,a++;break;case g:y.removed.push(n[i]),i++;break;case m:y.add++,y.removed.push(n[i]),i++,a++}return null!=y.index&&T.push(y),T}return n}();r._path=function(t,e){return void 0==t?t:t[e]},r.throttle=function(t,e){var n,r,i,e=e||100,s=null,a=0,o=function(){a=+new Date,s=null,i=t.apply(n,r),n=r=null};return function(){var u=+new Date,h=e-(u-a);return n=this,r=arguments,0>=h||h>e?(clearTimeout(s),s=null,a=u,i=t.apply(n,r),n=r=null):s||(s=setTimeout(o,h)),i}}}),t.register("terminator/src/env.js",function(t){t.svg=function(){return"undefined"!=typeof document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),t.transition=function(){}}),t.register("terminator/src/dom.js",function(t,e,n){var r=n.exports,i=(e("./env.js"),e("./util")),s=document.createElement("div");r.tNode=s,r.msie=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1]),isNaN(r.msie)&&(r.msie=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])),r.create=function(t,e){return document[e?i.assert("svg"!==e||evn.svg,"this browser has no svg support")&&"createElementNS":"createElement"](t,e)},r.fragment=function(){return document.createDocumentFragment()},r.append=function(t,e){if("array"===i.typeOf(e))for(var n=0,s=e.length;s>n;n++)r.append(t,e[n]);else e&&t.appendChild(e)},r.attr=function(t,e,n){return void 0===n?t.getAttribute(e,n):null===n?t.removeAttribute(e):void("class"===e?t.className=n:t.setAttribute(e,n))},r.on=function(t,e,n,r){t.addEventListener?t.addEventListener(e,n,!!r):t.attachEvent("on"+e,n)},r.off=function(t,e,n,r){t.removeEventListener?t.removeEventListener(e,n,!!r):t.detachEvent("on"+e,n)},r.text=function(){var t={};return r.msie&&r.msie<9?(t[1]="innerText",t[3]="nodeValue"):t[1]=t[3]="textContent",function(e,n){var r=t[e.nodeType];return null==n?r?e[r]:"":void(e[r]=n)}}();r.html=function(){return void 0===text?node.innerHTML:void(node.innerHTML=text)},r.replace=function(t,e){e.parentNode&&e.parentNode.replaceChild(t,e)},r.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)},r.css=function(){},r.addClass=function(){},r.delClass=function(){},r.hasClass=function(){}}),t.register("terminator/src/group.js",function(t,e,n){function r(t){this.children=t||[]}var i=e("./util"),s=e("./dom");i.extend(r.prototype,{destroy:function(){for(var t,e=this.children,n=0,r=e.length;r>n;n++)t=e[n],"function"==typeof t.destroy?t.destroy():3==t.nodeType&&s.remove(t);this.children=null},generate:function(){for(var t,e,n=this.children,r=s.fragment(),i=0,a=n.length;a>i;i++){var e=null;t=n[i],t.generate?e=t.generate():"number"==typeof t.nodeType&&(e=t),e&&r.appendChild(e)}return r},get:function(t){return 0>t&&(t=this.children.length+t),this.children[t]},first:function(){},splice:function(){},push:function(t){this.children.push(t)}}),n.exports=r}),t.register("terminator/src/Scope.js",function(t,e,n){function r(t){this.$id=i.uid("scope"),this.$watchers=[],this.$children=[],this.$context=t}var i=e("./util.js"),s=e("./parser/Parser.js");i.extend(r.prototype,{$watch:function(t,e){"string"==typeof t&&(t=new s(t).expr(t));var n={get:t.body.bind(this.$context),fn:e,pathes:t.pathes};this.$watchers.push(n)},$set:function(t,e){"function"==typeof t?(t.call(this),this.$digest()):(this.$pathValue(t,e),this.$digest())},$get:function(t){"array"!==i.typeOf(t)&&(t=t.split("."));for(var e=this[t[0]],n=n,r=t.length;r>n;n++){if(!e)return e;e=e[t[n]]}return e},$digest:function(){for(var t=this.$watchers,e=this.$children,n=0,r=t.length;r>n;n++){var s=t[n],a=s.get(this),o=!0;if(s.deep&&"object"==i.typeOf(a))if(s.last){for(var u in a)if(s.last[u]!==a[u]){o=!1;break}if(o!==!1)for(var u in s.last)if(s.last[u]!==a[u]){o=!1;break}}else o=!1;else o=i.equals(a,s.last);o===!1?(s.fn(a,s.last),s.last=i.clone(a)):"array"==i.typeOf(o)&&o.length&&(s.fn(a,o),s.last=i.clone(a))}for(var n=0,r=e.length;r>n;n++)e[n].$digest()},$destroy:function(){var t=this.$parent;if(t){var e=t.$chidren,n=e.indexOf(this);~n&&e.splice(n,1)}this.$chidren=null,this.$context=null,this.$watcher=null,this.$parent=null},$new:function(){var t=i.create(this);return t.$root=this.$root,t.$id=i.uid("scope"),t.$parent=this,this.$children.push(t),t.$watcher=[],t.$children=[],t.$context=this.$context,t},$pathValue:function(t,e){var n=this;if("undefined"!=typeof e){for(var r=t.split("."),i=0,s=r.length-1;s>i;i++)if(null==(n=n[r[i]]))return;return void(n[r[s]]=e)}if(~t.indexOf(".")){for(var r=t.split("."),i=0,s=r.length;s>i;i++)if(null==(n=n[r[i]]))return}else n=n[t];return"function"==typeof n?n():n}}),n.exports=r}),t.register("terminator/src/parser/Lexer.js",function(t,e,n){function r(t){return function(e){return{type:t,value:e}}}function i(t,e){return function(){return{type:t,value:arguments[e]}}}function s(t,e){this.input=(t||"").trim(),this.opts=e||{},this.map=2!=this.opts.mode?f:p,this.states=["INIT"],this.opts.state&&this.states.push(this.opts.state)}function a(t){for(var e,n,r={},i=0,s=t.length;s>i;i++)e=t[i],n=e[2]||"INIT",(r[n]||(r[n]={rules:[],links:[]})).rules.push(e);return o(r)}function o(t){var e,n,s,a,o,h;for(var l in t){e=t[l],e.curIndex=1,n=e.rules,s=[];for(var l=0,f=n.length;f>l;l++){if(rule=n[l],o=rule[0],a=rule[1],"string"==typeof a)if(~a.indexOf(":")){var p=a.split(":"),d=p[0],v=parseInt(p[1].replace("$",""));a=i(d,v)}else a=r(a);"regexp"==u.typeOf(o)&&(o=o.toString().slice(1,-1)),o=o.replace(/\{(\w+)\}/g,function(t,e){return"string"==typeof c[e]?u.escapeRegExp(c[e]):String(c[e]).slice(1,-1)}),h=u.findSubCapture(o)+1,e.links.push([e.curIndex,h,a]),e.curIndex+=h,s.push(o)}e.TRUNK=new RegExp("^(?:("+s.join(")|(")+"))")}return t}var u=e("../util.js"),h=s.prototype;h.skipspace=function(t){var e,n=0,r=t;for(e=r.charCodeAt(n);e&&(32===e||13===e||10===e||8232===e||8233===e);)n++,e=r.charCodeAt(n);return this.index+=n,t.slice(n)},h.lex=function(t){t=(t||this.input).trim();{var e,n,r,i,s,a=[];this.input=t}for(this.index=0;t;)s=this.state(),e=this.map[s],n=e.TRUNK.exec(t),n||(console.log(a),this.error("Unrecoginized Token")),r=n[0].length,i=this._process.call(this,n,e),i&&a.push(i),this.index+=r,t=t.slice(r);return a.push({type:"EOF"}),a},h.next=function(){var t=this.map[this.state()],e=t.TRUNK.exec(str);e||this.error("Unrecoginized Token");var n=e[0].length,r=this._process.apply(this,e);return this.input=this.input.slice(n),r},h.error=function(t){throw"Parse Error: "+t+":\n"+u.trackErrorPos(this.input,this.index)},h._process=function(t,e){for(var n=e.links,r=n.length,i=0;r>i;i++){var s=n[i],a=s[2],o=s[0];if(void 0!=t[o]){if(a){var u=a.apply(this,t.slice(o,o+s[1]));u&&(u.pos=this.index)}break}}return u},h.enter=function(t){return this.states.push(t),this},h.state=function(){var t=this.states;return t[t.length-1]},h.leave=function(t){var e=this.states;t&&e[e.length-1]!==t||e.pop()};var c={BEGIN:"{{",END:"}}",NAME:/(?:[:_A-Za-z][-\.:_0-9A-Za-z]*)/,IDENT:/[\$_A-Za-z][-_0-9A-Za-z\$]*/,SPACE:/[\r\n\f ]/},l={COMMENT:[/<!--([^\x00]*?)-->/],ENTER_JST:[/[^\x00\<]*?(?={BEGIN})/,function(t){return this.enter("JST"),t?{type:"TEXT",value:t}:void 0}],ENTER_JST2:[/[^\x00]*?(?={BEGIN})/,function(t){return this.enter("JST"),t?{type:"TEXT",value:t}:void 0}],ENTER_TAG:[/[^\x00<>]*?(?=<)/,function(t){return this.enter("TAG"),t?{type:"TEXT",value:t}:void 0}],TEXT:[/[^\x00]+/,"TEXT"],TAG_NAME:[/{NAME}/,"NAME","TAG"],TAG_OPEN:[/<({NAME})\s*/,function(t,e){return{type:"TAG_OPEN",value:e}},"TAG"],TAG_CLOSE:[/<\/({NAME})[\r\n\f ]*>/,function(t,e){return this.leave(),{type:"TAG_CLOSE",value:e}},"TAG"],TAG_ENTER_JST:[/(?={BEGIN})/,function(){this.enter("JST")},"TAG"],TAG_PUNCHOR:[/[>\/=]/,function(t){return">"===t&&this.leave(),{type:t,value:t}},"TAG"],TAG_STRING:[/'([^']*)'|"([^"]*)"/,function(t,e,n){return{type:"STRING",value:e||n}},"TAG"],TAG_SPACE:[/{SPACE}+/,null,"TAG"],JST_COMMENT:[/{!([^\x00]*?)!}/,null,"JST"],JST_OPEN:["{BEGIN}#{SPACE}*({IDENT})",function(t,e){return{type:"OPEN",value:e}},"JST"],JST_PART_OPEN:["{BEGIN}~",function(t,e){return{type:"PART_OPEN",value:e}},"JST"],JST_LEAVE:[/{END}/,function(){return this.leave("JST"),{type:"END"}},"JST"],JST_CLOSE:[/{BEGIN}\s*\/\s*({IDENT})\s*{END}/,function(t,e){return this.leave("JST"),{type:"CLOSE",value:e}},"JST"],JST_EXPR_OPEN:["{BEGIN}",function(t,e){var n="="==e;return{type:"EXPR_OPEN",escape:n}},"JST"],JST_IDENT:["{IDENT}","IDENT","JST"],JST_SPACE:[/[ \r\n\f]+/,null,"JST"],JST_PUNCHOR:[/[=!]?==|[-=><+*\/%\!]?\=|\|\||&&|[\<\>\[\]\(\)\-\|\{}\+\*\/%?:\.!]/,function(t){return{type:t,value:t}},"JST"],JST_STRING:[/'([^']*)'|"([^"]*)"/,function(t,e,n){return{type:"STRING",value:e||n}},"JST"],JST_NUMBER:[/-?(?:[0-9]*\.[0-9]+|[0-9]+)(e\d+)?/,function(t){return{type:"NUMBER",value:parseFloat(t,10)}},"JST"]},f=a([l.COMMENT,l.ENTER_JST,l.ENTER_TAG,l.TEXT,l.TAG_NAME,l.TAG_OPEN,l.TAG_CLOSE,l.TAG_PUNCHOR,l.TAG_ENTER_JST,l.TAG_STRING,l.TAG_SPACE,l.JST_OPEN,l.JST_PART_OPEN,l.JST_CLOSE,l.JST_EXPR_OPEN,l.JST_IDENT,l.JST_SPACE,l.JST_LEAVE,l.JST_NUMBER,l.JST_PUNCHOR,l.JST_STRING,l.JST_COMMENT]),p=a([l.ENTER_JST2,l.TEXT,l.JST_OPEN,l.JST_PART_OPEN,l.JST_CLOSE,l.JST_EXPR_OPEN,l.JST_IDENT,l.JST_SPACE,l.JST_LEAVE,l.JST_NUMBER,l.JST_PUNCHOR,l.JST_STRING,l.JST_COMMENT]);n.exports=s}),t.register("terminator/src/helper/event.js",function(t,e,n){function r(){arguments.length&&this.$on.apply(this,arguments)}var i=[].slice,s=e("../util.js"),a={$on:function(t,e){if("object"==typeof t)for(var n in t)this.$on(n,t[n]);else{var r=this._handles||(this._handles={}),i=r[t]||(r[t]=[]);i.push(e)}return this},$off:function(t,e){if(t&&(this._handles=[]),this._handles){var n,r=this._handles;if(n=r[t]){if(!e)return r[t]=[],this;for(var i=0,s=n.length;s>i;i++)if(e===n[i])return n.splice(i,1),this}return this}},$trigger:function(t){var e,n=i.call(arguments,1),r=this._handles;if(!r||!(e=r[t]))return this;for(var s=0,a=e.length;a>s;s++)e[s].apply(this,n);return this}};s.extend(r.prototype,a),r.mixTo=function(t){t="function"==typeof t?t.prototype:t,s.extend(t,a)},n.exports=r}),t.register("terminator/src/parser/node.js",function(t,e,n){n.exports={element:function(t,e,n){return{type:"element",tag:t,attrs:e,children:n}},attribute:function(t,e){return{type:"attribute",name:t,value:e}},"if":function(t,e,n){return{type:"if",test:t,consequent:e,alternate:n}},list:function(t,e,n){return{type:"list",sequence:t,variable:e,body:n}},expression:function(t,e,n){return{type:"expression",get:t,set:e,depend:n}},text:function(t){return t},interplation:function(t){return{type:"interplation",expression:t}},partial:function(t){return{type:"partial",content:t}}}}),t.register("terminator/src/parser/Parser.js",function(t,e,n){function r(t,e){e=e||{},this.input=t,this.tokens=new a(t,e).lex(),this.pos=0,this.length=this.tokens.length}var i=e("../util.js"),s=e("./node.js"),a=e("./Lexer.js"),o=i.varName,u=i.randomVar("c"),h=i.makePredicate("STRING IDENT NUMBER"),c=i.makePredicate("true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt"),t={_path:i._path},l=r.prototype;l.parse=function(){return this.pos=0,this.program()},l.ll=function(t){t=t||1,0>t&&(t+=1);var e=this.pos+t-1;return e>this.length-1?this.tokens[this.length-1]:this.tokens[e]},l.la=function(t){return(this.ll(t)||"").type},l.match=function(t,e){if(n=this.eat(t,e))return n;var n=this.ll();this.error("expect ["+t+(null==e?"":":"+e)+']" -> got "['+n.type+(null==e?"":":"+n.value)+"]",n.pos)},l.error=function(t,e){throw"Parse Error: "+t+":\n"+i.trackErrorPos(this.input,null!=e?e:this.ll().pos)},l.next=function(t){t=t||1,this.pos+=t},l.eat=function(t,e){var n=this.ll();if("string"!=typeof t){for(var r=t.length;r--;)if(n.type==t[r])return this.next(),n}else if(n.type==t&&("undefined"==typeof e||n.value==e))return this.next(),n;return!1},l.isEmpty=function(t){return!t||t.length},l.program=function(){for(var t=[],e=this.ll();"EOF"!==e.type&&"TAG_CLOSE"!==e.type;)t.push(this.statement()),e=this.ll();return t},l.statements=function(t){for(var e,n=[];!(e=this.eat("CLOSE",t));)n.push(this.statement());return n},l.statement=function(){var t=this.ll();switch(t.type){case"NAME":case"TEXT":var e=t.value;for(this.next();t=this.eat(["NAME","TEXT"]);)e+=t.value;return e;case"TAG_OPEN":return this.xml();case"OPEN":return this.directive();case"EXPR_OPEN":return this.interplation();case"PART_OPEN":return this.partial();default:this.error("Unexpected token: "+this.la())}},l.xml=function(){var t,e,n,r;return t=this.match("TAG_OPEN").value,e=this.attrs(),r=this.eat("/"),this.match(">"),r||(n=this.program(),this.eat("TAG_CLOSE",t)||this.error("expect </"+t+"> gotno matched closeTag")),s.element(t,e,n)},l.attrs=function(){for(var t,e,n=[];e=this.eat("NAME");)t={name:e.value},this.eat("=")&&(t.value=this.attvalue()),n.push(t);return n},l.attvalue=function(){var t=this.ll();switch(t.type){case"NAME":case"STRING":this.next();var e=t.value;if("expression"!==e.type&&~e.indexOf("{{")){var n=new r(e,{mode:2}).parse(),i=function(t){var e=n.map(function(e){return e&&e.get?e.get(t):e||""}).join("");return e};e=s.expression(i,null)}return e;case"EXPR_OPEN":return this.interplation();default:this.error("Unexpected token: "+this.la())}return t.value},l.directive=function(t){return t=t||this.ll().value,"function"==typeof this[t]?this[t]():void this.error("Undefined directive["+t+"]")},l.interplation=function(){var t=(this.match("EXPR_OPEN").nowatch,this.expression(!0));return this.match("END"),t},l.partial=function(){this.next();var t=this.expression();return this.match("END"),s.partial(t)},l.if=function(){this.next();var t=this.expr(),e=[],n=[],r=e;this.match("END");for(var i,a;!(a=this.eat("CLOSE"));)if(i=this.ll(),"OPEN"==i.type)switch(i.value){case"else":r=n,this.next(),this.match("END");break;case"elseif":return n.push(this.if()),s.if(t,e,n);default:r.push(this.statement())}else r.push(this.statement());return"if"!==a.value&&this.error("Unmatched if directive"),s.if(t,e,n)},l.list=function(){this.next();var t,e,n=this.expr(),r=[],i=[],a=r;for(this.match("IDENT","as"),t=this.match("IDENT").value,this.match("END");!(e=this.eat("CLOSE"));)this.eat("OPEN","else")?(a=i,this.match("END")):a.push(this.statement());return"list"!==e.value&&this.error("expect {/list} got {/"+e.value+"}",e.pos),s.list(n,t,r,i)},l.expression=function(){var t=this.expr();return t.depend?t:t.get},l.expr=function(){this.depend=[];var e=this.filter(),n=e.get||e,r=this.depend.length?"var "+o+"="+u+".data;":"",a=new Function(u,r+"try {return ("+n+")}catch(e){return undefined}");if(e.set)var h=new Function(u,i.setName,r+";try {return ("+e.set+")}catch(e){}");return this.depend.length?s.expression(a,h,this.depend):s.expression(a.call(t))},l.filter=function(){var t,e,n=this.assign(),r=this.eat("|");if(r){t=[";(function(data){","var ",e=i.attrName(),"=",this.condition(depend).get,";"];do t.push(e+" = this.f["+this.match("IDENT").value+"]("+e),t.push(this.eat(":")?", "+this.arguments(depend,"|").join(",")+");":");");while(r=this.eat("|"));return t.push("return "+e+"}"),this.getset(t.join(""))}return n},l.assign=function(){var t,e=this.condition();return(t=this.eat(["=","+=","-=","*=","/=","%="]))?(e.set||this.error("invalid lefthand expression in assignment expression"),this.getset("("+e.get+t.type+this.condition().get+")",e.set)):e},l.condition=function(){var t=this.or();return this.eat("?")?this.getset([t.get+"?",this.assign().get,this.match(":").type,this.assign().get].join("")):t},l.or=function(){var t=this.and();return this.eat("||")?this.getset(t.get+"||"+this.or().get):t},l.and=function(){var t=this.equal();return this.eat("&&")?this.getset(t.get+"&&"+this.and().get):t},l.equal=function(){var t,e=this.relation();return(t=this.eat(["==","!=","===","!=="]))?this.getset(e.get+t.type+this.equal().get):e},l.relation=function(){var t,e=this.additive();return(t=this.eat(["<",">",">=","<="])||this.eat("IDENT","in"))?this.getset(e.get+t.value+this.relation().get):e},l.additive=function(){var t,e=this.multive();return(t=this.eat(["+","-"]))?this.getset(e.get+t.value+this.additive().get):e},l.multive=function(){var t,e=this.unary();return(t=this.eat(["*","/","%"]))?this.getset(e.get+t.type+this.multive().get):e},l.unary=function(){var t;return(t=this.eat(["+","-","~","!"]))?this.getset("("+t.type+this.unary().get+")"):this.member()},l.member=function(t,e,n){var r,s,a;if(t)"string"==typeof e&&h(e)?n.push(e):(n&&n.length&&this.depend.push(n),n=null);else{s=this.primary();var c=typeof s;"string"===c?(n=[],"$self"===s?(n.push("*"),t=o):(n.push(s),e=s,t=o+"['"+s+"']")):"this"===s.get?(t=u,n=["this"]):(n=null,t=s.get)}if(r=this.eat(["[",".","("]))switch(r.type){case".":var l=this.match("IDENT").value;return t+="['"+l+"']",this.member(t,a,n);case"[":return s=this.expr(),t+="['"+s.get+"']",this.match("]"),this.member(t,s,n);case"(":var f=this.arguments();return t+="("+f.join(",")+")",this.match(")"),this.member(t,null,n)}n&&n.length&&this.depend.push(n);var p={get:t};return e&&(p.set=t+"="+i.setName),p},l.arguments=function(t){t=t||")";var e=[];do this.la()!==t&&e.push(this.assign().get);while(this.eat(","));return e},l.primary=function(){var t=this.ll();switch(t.type){case"{":return this.object();case"[":return this.array();case"(":return this.paren();case"STRING":return this.next(),this.getset("'"+t.value+"'");case"NUMBER":return this.next(),this.getset(t.value);case"IDENT":return this.next(),c(t.value)?this.getset(t.value):t.value;default:this.error("Unexpected Token: "+t.type)}},l.object=function(){for(var t,e=[this.match("{").type];;){if(t=this.eat(["STRING","IDENT","NUMBER"]),!t){e.push(this.match("}").type);break}e.push("'"+t.value+"'"+this.match(":").type),e.push(this.condition().get),this.eat(",")&&e.push(",")}return{get:e.join("")}},l.array=function(){for(var t=[this.match("[").type];item=this.condition();)t.push(item.get),this.eat(",")&&this.push(",");return t.push(this.match("]").type),{get:t.join("")}},l.paren=function(){this.match("(");var t=this.filter();return t.get="("+t.get+")",this.match(")"),t},l.getset=function(t,e){return{get:t,set:e}},l.flatenDepend=function(t){for(var e=0,n=t.length;n>e;e++);},n.exports=r}),t.alias("terminator/src/common.js","terminator/index.js"),"object"==typeof exports?module.exports=t("terminator"):"function"==typeof define&&define.amd?define(function(){return t("terminator")}):window.Termin=t("terminator")}();